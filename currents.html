<!DOCTYPE html>
<html lang="en" data-theme="night">
<head>
  <meta charset="utf-8">

  <!-- =========================================================
       SEO / IA micro-optimisation (stable + shareable)
       ========================================================= -->
  <title>Currents · The Novel of Comedy (TNoC)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0b0b0c">
  <meta name="color-scheme" content="dark light">
  <meta name="description" content="Currents of humorous fiction in The Novel of Comedy: Comedy of Society, Crime Comedy, and Neo-Nonsense. Definitions, branches, engines, and how to refine guides with the Toolbox.">
  <meta name="author" content="Boris Jeanson Béteille">
  <meta name="robots" content="index,follow,max-image-preview:large">

  <link rel="canonical" href="https://www.thenovelofcomedy.com/currents.html">

  <meta property="og:type" content="website">
  <meta property="og:site_name" content="The Novel of Comedy (TNoC)">
  <meta property="og:title" content="Currents · The Novel of Comedy">
  <meta property="og:description" content="Comedy of Society · Crime Comedy · Neo-Nonsense: definitions, branches, engines and navigation logic.">
  <meta property="og:url" content="https://www.thenovelofcomedy.com/currents.html">
  <meta property="og:image" content="https://www.thenovelofcomedy.com/img/wilt.png">
  <meta property="og:image:alt" content="Cover: Wilt · Tom Sharpe (1976)">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Currents · The Novel of Comedy">
  <meta name="twitter:description" content="Three currents of humorous fiction: Society · Crime · Neo-Nonsense.">
  <meta name="twitter:image" content="https://www.thenovelofcomedy.com/img/wilt.png">

  <link rel="icon" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect width="64" height="64" rx="14" fill="%230b0b0c"/><text x="50%25" y="54%25" text-anchor="middle" font-family="Georgia" font-size="18" fill="%23f6f4ef" letter-spacing="2">TNoC</text></svg>'>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Currents · The Novel of Comedy (TNoC)",
    "url": "https://www.thenovelofcomedy.com/currents.html",
    "inLanguage": "en",
    "description": "Definitions and navigation of the three currents of humorous fiction in The Novel of Comedy: Comedy of Society, Crime Comedy, Neo-Nonsense."
  }
  </script>

  <style>
    /* =========================================================
       TNoC - Currents page (aligned with index master)
       + Search overlay (Ctrl/⌘K)
       + Bottom nav mobile
       ========================================================= */
    :root{
      --night:#0b0b0c;
      --ivory:#f6f4ef;
      --paper:#fbfaf7;
      --ink:#0f0f10;

      --smoke:rgba(246,244,239,.62);
      --lineN:rgba(246,244,239,.14);
      --lineN2:rgba(246,244,239,.22);

      --softN:rgba(246,244,239,.06);

      --accent:#bfa77a;
      --accent2:rgba(191,167,122,.24);

      --w:1120px;
      --pad: clamp(16px, 4.5vw, 28px);

      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --serif: ui-serif, "Iowan Old Style","Palatino Linotype", Palatino, Georgia, serif;

      --cap: 11px;
      --track: .22em;

      --shadowN: 0 24px 90px rgba(0,0,0,.62);
    }

    html,body{
      margin:0; padding:0;
      font-family: var(--sans);
      background: var(--night);
      color: var(--ivory);
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    a:hover{text-decoration:none}
    *{box-sizing:border-box}

    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; scroll-behavior:auto !important; }
    }

    /* Subtle grain */
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.09;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='240' height='240' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
    }

    /* a11y */
    .skiplink{
      position:absolute; left:14px; top:12px;
      padding:10px 12px;
      border-radius:999px;
      background: var(--ivory);
      color: var(--ink);
      z-index:999;
      transform:translateY(-140%);
      transition:transform .14s ease;
      border:1px solid rgba(0,0,0,.12);
      text-decoration:none;
      font-size:12px;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .skiplink:focus{ transform:translateY(0); }

    /* =========================================================
       TOPBAR
       ========================================================= */
    .topbar{
      position:sticky; top:0; z-index:80;
      backdrop-filter: blur(18px);
      background: color-mix(in srgb, var(--night) 84%, transparent);
      border-bottom:1px solid var(--lineN);
    }
    .topbar-inner{
      max-width:var(--w);
      margin:0 auto;
      padding: 12px var(--pad);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      min-width:0;
    }
    .brand-mark{
      width:34px; height:34px;
      border-radius: 14px;
      border:1px solid var(--lineN2);
      display:flex; align-items:center; justify-content:center;
      font-family: var(--serif);
      font-weight: 700;
      letter-spacing:.18em;
      font-size: 11px;
      background: rgba(255,255,255,.03);
      flex:0 0 auto;
    }
    .brand-text{min-width:0}
    .brand-title{
      font-family: var(--serif);
      font-size: 14px;
      letter-spacing: .12em;
      text-transform: uppercase;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      line-height: 1.05;
    }
    .brand-sub{
      margin-top:3px;
      font-size: 10.5px;
      letter-spacing: .16em;
      text-transform: uppercase;
      color: var(--smoke);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .nav{
      display:flex; gap:10px; align-items:center;
      font-size:12px;
      letter-spacing:.10em;
      text-transform:uppercase;
    }
    .nav a{opacity:.82; padding:8px 6px}
    .nav a:hover{opacity:1}
    .nav a.active{opacity:1; color: rgba(191,167,122,.95);}
    @media(max-width:860px){
      .brand-sub{display:none}
      .nav a{display:none}
      .kbd{display:none}
    }

    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px;
      padding: 10px 12px;
      border-radius:999px;
      border:1px solid var(--lineN2);
      background: rgba(255,255,255,.04);
      color: var(--ivory);
      cursor:pointer;
      transition: transform .14s ease, opacity .14s ease, border-color .14s ease, background .14s ease;
      user-select:none;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      white-space:nowrap;
    }
    .btn:hover{ transform:translateY(-1px); border-color: rgba(191,167,122,.55); background: rgba(191,167,122,.10); }
    .btn:focus-visible{ outline:2px solid rgba(191,167,122,.55); outline-offset:3px; }
    .btn-primary{
      background: var(--ivory);
      color: var(--ink);
      border-color: transparent;
    }
    .btn-primary:hover{
      background: color-mix(in srgb, var(--ivory) 92%, var(--accent) 8%);
      transform:translateY(-1px);
    }
    .kbd{
      font-size:10px;
      opacity:.8;
      padding:3px 7px;
      border-radius:999px;
      border:1px solid var(--lineN);
      background: rgba(0,0,0,.22);
      letter-spacing:.06em;
      text-transform:none;
    }

    /* Clickable terms (paper) */
    .term{
      color: rgba(11,11,12,.78);
      text-decoration: underline;
      text-decoration-color: rgba(191,167,122,.55);
      text-underline-offset: 3px;
      text-decoration-thickness: 1px;
      transition: color .14s ease, text-decoration-color .14s ease, background .14s ease;
      border-radius: 8px;
      padding: 1px 3px;
    }
    .term:hover{
      color: rgba(0,0,0,.92);
      text-decoration-color: rgba(191,167,122,.95);
      background: rgba(191,167,122,.14);
    }
    .term:focus-visible{
      outline:2px solid rgba(191,167,122,.55);
      outline-offset: 3px;
    }

    /* =========================================================
       HERO - Currents
       ========================================================= */
    .hero{
      position:relative;
      border-bottom:1px solid var(--lineN);
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(1000px 520px at 16% 18%, rgba(191,167,122,.14), transparent 60%),
        radial-gradient(900px 520px at 86% 30%, rgba(255,255,255,.06), transparent 65%),
        linear-gradient(90deg, rgba(0,0,0,.90) 0%, rgba(0,0,0,.66) 52%, rgba(0,0,0,.24) 82%, rgba(0,0,0,0) 100%);
      pointer-events:none;
    }
    .hero-inner{
      position:relative;
      z-index:2;
      max-width:var(--w);
      margin:0 auto;
      padding: 26px var(--pad) 18px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 16px;
      align-items:end;
    }
    @media(max-width:980px){
      .hero-inner{ grid-template-columns:1fr; align-items:start; }
    }
    .hero-card{
      border-radius: 22px;
      border:1px solid rgba(246,244,239,.14);
      background: rgba(0,0,0,.36);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadowN);
      padding: 18px 18px 16px;
      max-width: 860px;
    }
    .hero-kicker{
      font-size: var(--cap);
      letter-spacing: var(--track);
      text-transform: uppercase;
      color: rgba(246,244,239,.78);
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin-bottom: 10px;
    }
    .dot{width:4px;height:4px;border-radius:99px;background: rgba(246,244,239,.86);opacity:.8}
    .hero-title{
      margin:0;
      font-family: var(--serif);
      font-weight: 780;
      letter-spacing: -.02em;
      line-height: 1.03;
      font-size: clamp(30px, 6.2vw, 54px);
    }
    .hero-tag{
      margin: 10px 0 0;
      font-family: var(--serif);
      font-size: clamp(14px, 3.9vw, 18px);
      line-height: 1.55;
      color: rgba(246,244,239,.78);
      max-width: 66ch;
    }
    .hero-actions{
      margin-top: 14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }

    .hero-aside{
      border-radius:22px;
      border:1px solid rgba(246,244,239,.14);
      background: rgba(0,0,0,.34);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadowN);
      padding: 14px;
      color: rgba(246,244,239,.78);
      font-size: 13px;
      line-height: 1.55;
    }
    .pillrow{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; }
    .pill{
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(246,244,239,.16);
      background: rgba(246,244,239,.05);
      font-size: 10px;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: rgba(246,244,239,.76);
      white-space:nowrap;
    }

    /* =========================================================
       Seam (night to paper)
       ========================================================= */
    .stitch-divider{
      position:relative;
      height:74px;
      background: linear-gradient(180deg, rgba(11,11,12,1) 0%, rgba(11,11,12,1) 38%, rgba(251,250,247,1) 100%);
      border-top:1px solid rgba(246,244,239,.08);
    }
    .stitch-divider::before{
      content:"";
      position:absolute; left:0; right:0; top:26px;
      height:1px;
      background:
        repeating-linear-gradient(90deg,
          rgba(191,167,122,.65) 0, rgba(191,167,122,.65) 12px,
          rgba(246,244,239,.12) 12px, rgba(246,244,239,.12) 22px);
      opacity:.42;
    }
    .stitch-badge{
      position:absolute; left:50%; top:16px;
      transform:translateX(-50%);
      padding:7px 12px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(246,244,239,.94);
      color: rgba(0,0,0,.70);
      font-size: 10.5px;
      letter-spacing: .18em;
      text-transform: uppercase;
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 26px rgba(0,0,0,.10);
      white-space:nowrap;
    }

    /* =========================================================
       PAPER
       ========================================================= */
    .main{
      background: #fbfaf7;
      color: #0f0f10;
    }
    .main-inner{
      max-width: var(--w);
      margin:0 auto;
      padding: 26px var(--pad) 42px;
      display:grid;
      grid-template-columns: 1fr minmax(280px, .54fr);
      gap: 20px;
      align-items:start;
    }
    @media(max-width:960px){
      .main-inner{ grid-template-columns:1fr; }
    }

    .section{
      padding: 24px 0;
      border-bottom: 1px solid rgba(11,11,12,.08);
      scroll-margin-top:110px;
    }
    .section:last-of-type{ border-bottom:none; padding-bottom: 10px; }

    .kicker{
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.58);
    }
    .h2{
      font-family: var(--serif);
      margin: 8px 0 8px;
      font-size: 28px;
      line-height: 1.08;
      letter-spacing: -.01em;
    }
    .h2 a{
      color: inherit;
      text-decoration: none;
    }
    .h2 a:hover{
      text-decoration: underline;
      text-decoration-color: rgba(191,167,122,.70);
      text-underline-offset: 6px;
      text-decoration-thickness: 2px;
    }
    .lead{
      font-family: var(--serif);
      margin:0;
      font-size: 16px;
      line-height: 1.7;
      color: rgba(11,11,12,.74);
      max-width: 88ch;
    }
    .sub{
      margin: 12px 0 0;
      font-size: 13.5px;
      line-height: 1.65;
      color: rgba(11,11,12,.60);
      max-width: 88ch;
    }

    .grid-3{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px; }
    .grid-2{ display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:14px; }
    @media(max-width:900px){ .grid-3,.grid-2{ grid-template-columns:1fr; } }

    .card{
      background: rgba(255,255,255,.70);
      border-radius: 18px;
      border: 1px solid rgba(11,11,12,.10);
      box-shadow: 0 10px 34px rgba(0,0,0,.06);
      padding: 14px 14px 12px;
    }
    .card-head{
      display:flex; align-items:baseline; justify-content:space-between; gap:10px;
      font-family: var(--serif);
      font-weight: 780;
      font-size: 16px;
      margin-bottom: 8px;
      letter-spacing: -.01em;
    }
    .card-body{
      font-size: 13.5px;
      line-height: 1.65;
      color: rgba(11,11,12,.78);
    }
    .card-body p{ margin:8px 0; }
    .list{
      margin: 10px 0 0;
      padding-left: 17px;
      font-size: 13.5px;
      color: rgba(11,11,12,.78);
    }

    .linkpill{
      display:inline-flex; align-items:center; gap:8px;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.68);
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(11,11,12,.12);
      background: rgba(11,11,12,.02);
      text-decoration:none;
      transition: transform .14s ease, background .14s ease, border-color .14s ease;
      white-space:nowrap;
    }
    .linkpill:hover{
      transform: translateY(-1px);
      border-color: rgba(191,167,122,.55);
      background: rgba(191,167,122,.10);
    }

    .detail-links{
      margin-top: 14px;
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
    }

    /* mobile toc */
    .mobile-toc{
      display:none;
      margin: 10px 0 0;
      border-radius: 18px;
      border:1px solid rgba(11,11,12,.10);
      background: rgba(255,255,255,.78);
      box-shadow: 0 10px 34px rgba(0,0,0,.06);
      overflow:hidden;
    }
    .mobile-toc summary{
      cursor:pointer;
      list-style:none;
      padding: 12px 12px;
      font-weight: 700;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.72);
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      background: linear-gradient(180deg, rgba(11,11,12,.01), rgba(11,11,12,.03));
    }
    .mobile-toc summary::-webkit-details-marker{ display:none; }
    .toc{
      padding: 10px;
      display:grid;
      gap:6px;
    }
    .toc a{
      padding: 10px 10px;
      border-radius: 14px;
      border:1px solid transparent;
      background: rgba(11,11,12,.015);
      font-size: 13px;
      color: rgba(11,11,12,.78);
      text-decoration:none;
    }
    .toc a:hover{
      border-color: rgba(191,167,122,.40);
      background: rgba(191,167,122,.10);
    }
    .toc a.active{
      border-color: rgba(191,167,122,.70);
      background: rgba(191,167,122,.14);
      color:#000;
      font-weight:700;
    }
    @media(max-width:960px){ .mobile-toc{ display:block; } }

    /* rail */
    .rail{
      background: rgba(255,255,255,.78);
      border-radius: 18px;
      border:1px solid rgba(11,11,12,.10);
      box-shadow: 0 10px 34px rgba(0,0,0,.06);
      overflow:hidden;
    }
    .rail-sticky{ position:static; }
    @media(min-width:960px){ .rail-sticky{ position:sticky; top:88px; } }
    .rail header{
      padding: 14px 14px 12px;
      border-bottom:1px solid rgba(11,11,12,.08);
      background: linear-gradient(180deg, rgba(11,11,12,.01), rgba(11,11,12,.03));
    }
    .rail header h3{
      margin:0 0 6px;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.78);
      font-family: var(--serif);
      font-weight: 700;
    }
    .rail-meta{
      font-size:12px;
      color: rgba(11,11,12,.58);
      display:flex; flex-wrap:wrap;
      gap:8px 10px;
      align-items:center;
      margin:0;
    }
    .rail-pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border-radius:999px;
      border:1px solid rgba(11,11,12,.10);
      background: rgba(11,11,12,.02);
      font-size: 10px;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: rgba(11,11,12,.62);
      white-space:nowrap;
    }
    .rail-pill .tiny{
      width:6px; height:6px; border-radius:99px;
      background: rgba(191,167,122,.95);
      box-shadow:0 0 0 5px rgba(191,167,122,.18);
    }
    .rail-progress{
      margin-top:10px;
      height:6px;
      border-radius:999px;
      background: rgba(11,11,12,.03);
      border:1px solid rgba(11,11,12,.06);
      overflow:hidden;
    }
    .rail-progress > span{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(191,167,122,.95), rgba(11,11,12,.35));
    }

    /* =========================================================
       SEARCH OVERLAY (same as index)
       ========================================================= */
    .overlay{
      position:fixed;
      inset:0;
      z-index:200;
      display:none;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(16px);
      align-items:flex-start;
      justify-content:center;
      padding: 84px var(--pad) 16px;
    }
    .overlay.open{ display:flex; }
    .searchbox{
      width:min(900px, 100%);
      border-radius: 22px;
      border:1px solid rgba(246,244,239,.16);
      background: rgba(0,0,0,.50);
      box-shadow: 0 28px 110px rgba(0,0,0,.78);
      overflow:hidden;
    }
    .search-top{
      padding: 12px 12px 10px;
      border-bottom:1px solid rgba(246,244,239,.10);
      display:flex; gap:10px; align-items:center;
    }
    .search-top input{
      width:100%;
      padding: 12px 12px;
      border-radius: 16px;
      border:1px solid rgba(246,244,239,.16);
      background: rgba(246,244,239,.06);
      color: var(--ivory);
      outline:none;
      font-size: 14px;
    }
    .search-top input::placeholder{ color: rgba(246,244,239,.55); }
    .search-close{
      flex:0 0 auto;
      padding: 10px 12px;
      border-radius: 16px;
      border:1px solid rgba(246,244,239,.18);
      background: rgba(246,244,239,.06);
      color: var(--ivory);
      cursor:pointer;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
    }
    .search-meta{
      padding: 10px 12px 12px;
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      color: rgba(246,244,239,.70);
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .results{
      max-height:min(54vh, 520px);
      overflow:auto;
      padding: 10px 10px 12px;
      display:grid;
      gap:8px;
    }
    .result{
      display:flex;
      gap:10px;
      align-items:center;
      border-radius: 18px;
      border:1px solid rgba(246,244,239,.12);
      background: rgba(246,244,239,.04);
      padding: 10px;
      text-decoration:none;
    }
    .result:hover{ border-color: rgba(191,167,122,.45); background: rgba(191,167,122,.08); }
    .rthumb{
      width:48px;
      height:48px;
      border-radius: 14px;
      overflow:hidden;
      background: rgba(246,244,239,.06);
      border:1px solid rgba(246,244,239,.14);
      flex:0 0 auto;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: var(--serif);
      color: rgba(246,244,239,.82);
      letter-spacing: .10em;
      text-transform: uppercase;
      font-size: 12px;
    }
    .rthumb img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      filter: grayscale(1) contrast(1.02);
    }
    .rtext{ min-width:0; }
    .rtext .rk{
      font-size: 9.5px;
      letter-spacing: .18em;
      text-transform: uppercase;
      opacity:.76;
      margin:0 0 2px;
    }
    .rtext .rt{
      margin:0;
      font-family: var(--serif);
      font-weight: 780;
      font-size: 13px;
      line-height: 1.2;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .rtext .rs{
      margin-top:3px;
      font-size: 12px;
      opacity:.78;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .empty{
      padding: 18px 12px;
      text-align:center;
      color: rgba(246,244,239,.78);
      font-size: 12px;
      letter-spacing: .06em;
    }

    /* =========================================================
       FOOTER
       ========================================================= */
    .site-footer{
      background: rgba(11,11,12,1);
      color: rgba(246,244,239,.86);
      border-top:1px solid rgba(246,244,239,.10);
    }
    .site-footer .inner{
      max-width:var(--w);
      margin:0 auto;
      padding: 18px var(--pad) 24px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
    }
    .site-footer .left{
      min-width:0;
      font-size: 12px;
      line-height:1.5;
      letter-spacing: .02em;
    }
    .site-footer .left strong{
      font-family: var(--serif);
      font-weight: 780;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .site-footer .left .muted{ opacity:.78; }

    .site-footer .links{
      display:flex;
      flex-wrap:wrap;
      justify-content:flex-end;
      gap: 10px 14px;
      font-size: 11px;
      letter-spacing: .12em;
      text-transform: uppercase;
      opacity:.88;
    }
    .site-footer .links a{
      color:inherit;
      text-decoration:none;
      padding:4px 0;
      opacity:.82;
    }
    .site-footer .links a:hover{ opacity:1; text-decoration:none; color: rgba(191,167,122,.95); }

    @media(max-width:900px){
      .site-footer .inner{
        flex-direction:column;
        align-items:flex-start;
      }
      .site-footer .links{ justify-content:flex-start; }
    }

    /* =========================================================
       BOTTOM NAV (mobile) — aligned with index
       ========================================================= */
    .bottomnav{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:120;
      display:none;
      background: color-mix(in srgb, var(--night) 86%, transparent);
      border-top:1px solid rgba(246,244,239,.10);
      backdrop-filter: blur(18px);
    }
    .bottomnav-inner{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      padding: 10px 10px 12px;
      gap: 8px;
    }
    .bn-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:6px;
      padding: 10px 6px;
      border-radius: 16px;
      color: var(--ivory);
      text-decoration:none;
      opacity:.86;
      border:1px solid rgba(246,244,239,.10);
      cursor:pointer;
      background: rgba(246,244,239,.03);
      font-size: 11px;
      letter-spacing: .06em;
    }
    .bn-item:hover{ opacity:1; }
    .bn-item.active{
      opacity:1;
      border-color: rgba(191,167,122,.55);
      background: rgba(191,167,122,.12);
    }
    .bn-ic{ font-size:16px; line-height:1; }
    .bn-tx{ font-size:11px; }
    @media(max-width:600px){
      .bottomnav{ display:block; }
      body{ padding-bottom:72px; }
    }
  </style>
</head>

<body id="top">
  <a class="skiplink" href="#paper">Skip to currents</a>

  <!-- Search overlay -->
  <div class="overlay" id="searchOverlay" aria-hidden="true">
    <div class="searchbox" role="dialog" aria-modal="true" aria-label="Search TNoC">
      <div class="search-top">
        <input id="searchInput" type="text" placeholder="Search a current, a branch, a page…" autocomplete="off">
        <button class="search-close" id="searchClose" type="button" aria-label="Close search">Esc</button>
      </div>

      <div class="search-meta">
        <div><strong>Tip</strong> · Ctrl+K / ⌘K · Esc</div>
        <div aria-live="polite"><span id="searchCount">0</span> results</div>
      </div>

      <div class="results" id="searchResults" aria-label="Search results"></div>
      <div class="empty" id="searchEmpty" style="display:none;">No results. Try another spelling.</div>
    </div>
  </div>

  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <a class="brand" href="index.html" aria-label="The Novel of Comedy home"
         data-searchitem data-kind="Page" data-title="Home" data-sub="The Novel of Comedy — index" data-key="home index tnco">
        <div class="brand-mark">TNoC</div>
        <div class="brand-text">
          <div class="brand-title">Currents</div>
          <div class="brand-sub">Three currents · stable navigation</div>
        </div>
      </a>

      <nav class="nav" aria-label="Navigation">
        <a href="index.html#rows" data-searchitem data-kind="Page" data-title="Browse rows" data-sub="Homepage streaming rows" data-key="browse rows">Browse</a>
        <a class="active" href="currents.html" data-searchitem data-kind="Page" data-title="Currents" data-sub="Three currents of humorous fiction" data-key="currents society crime neo">Currents</a>
        <a href="novel-guides.html" data-searchitem data-kind="Page" data-title="Novel guides" data-sub="Fixed ten-part matrix guides" data-key="novel guides matrix">Novels</a>
        <a href="author-profiles.html" data-searchitem data-kind="Page" data-title="Author profiles" data-sub="Portraits + method" data-key="author profiles">Authors</a>
        <a href="toolbox.html" data-searchitem data-kind="Page" data-title="Toolbox" data-sub="Vocabulary reused everywhere" data-key="toolbox">Toolbox</a>

        <button class="btn" id="openSearch" type="button" aria-label="Open search">
          Search <span class="kbd">Ctrl/⌘ K</span>
        </button>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" aria-label="Currents hero"
           data-searchitem data-kind="Section" data-title="Currents — hero" data-sub="Current → Branch → Engine" data-key="current branch engine">
    <div class="hero-inner">
      <div class="hero-card">
        <div class="hero-kicker"><span class="dot"></span> Current <span class="dot"></span> Branch <span class="dot"></span> Engine</div>
        <h1 class="hero-title">Currents</h1>
        <p class="hero-tag">
          A readable map of comic fiction: choose a <em>current</em>, then a <em>branch</em>, then the <em>engine</em>.
          Refine with the Toolbox: <em>Environment</em> + <em>Comedy level</em>.
        </p>

        <div class="hero-actions">
          <a class="btn btn-primary" href="current-comedy-of-society.html">Comedy of Society</a>
<a class="btn btn-primary" href="current-comic-crime.html">Crime Comedy</a>
<a class="btn btn-primary" href="current-neo-nonsense.html">Neo-Nonsense</a>
          <a class="btn" href="toolbox.html" data-searchitem data-kind="Page" data-title="Toolbox" data-sub="Refine guides" data-key="toolbox refine">Toolbox</a>
          <button class="btn" id="openSearch2" type="button">Search</button>
        </div>
      </div>

      <aside class="hero-aside" aria-label="How to use currents">
        <strong>Navigation logic</strong><br>
        <em>Current → Branch → Engine</em>, then refine with
        <em>Environment</em> + <em>Comedy level</em> (Toolbox).<br>
        <span style="opacity:.92">Labs and flags are optional.</span>
        <div class="pillrow">
          <span class="pill">where it plays</span>
          <span class="pill">how it moves</span>
          <span class="pill">refine</span>
        </div>
      </aside>
    </div>
  </section>

  <div class="stitch-divider" aria-hidden="true">
    <div class="stitch-badge">Night → Paper</div>
  </div>

  <!-- PAPER -->
  <main class="main" id="paper" aria-label="Currents paper layer">
    <div class="main-inner">
      <div>
        <details class="mobile-toc" id="mobileToc">
          <summary>
            <span>In this page</span>
            <span style="opacity:.72; font-size:12px" id="mobileMeta">~4 min</span>
          </summary>
          <nav class="toc" aria-label="In this page (mobile)" id="tocMobile">
            <a href="#definition">Current → Branch → Engine</a>
            <a href="#society">Comedy of Society</a>
            <a href="#crime">Crime Comedy</a>
            <a href="#neo">Neo-Nonsense</a>
            <a href="#how-to-start">Where to start?</a>
            <a href="#toolbox-used">Toolbox</a>
          </nav>
        </details>

        <!-- =========================================================
             Definition (Norms)
             ========================================================= -->
        <section class="section" id="definition" data-spy
                 data-searchitem data-kind="Section" data-title="Definition" data-sub="Current → Branch → Engine" data-key="definition current branch engine">
          <div class="kicker">Definition</div>
          <h2 class="h2">Current → Branch → Engine</h2>
          <p class="lead">
            A <strong>current</strong> is the macro orientation of a novel’s laughter.
            It stays readable. It does not freeze the book into a rigid genre label.
          </p>
          <p class="sub">
            The atlas uses a simple ladder:
            <strong>Current</strong> → <strong>Branch</strong> → <strong>Engine</strong>,
            then refine with the Toolbox: <strong>Environment</strong> + <strong>Comedy level</strong>.
            <em>Labs and flags are optional.</em>
          </p>

          <div class="grid-2" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Card" data-title="Current" data-sub="Macro orientation" data-key="current macro">
              <div class="card-head"><span>Current</span><span class="linkpill" style="pointer-events:none;">macro</span></div>
              <div class="card-body">
                <p><strong>Orientation:</strong>
                  <a class="term" href="current-comedy-of-society.html" data-searchitem data-kind="Page" data-title="Current: Comedy of Society" data-sub="Detail page" data-key="current society">Comedy of Society</a> ·
                  <a class="term" href="current-comic-crime.html" data-searchitem data-kind="Page" data-title="Current: Crime Comedy" data-sub="Detail page" data-key="current crime">Crime Comedy</a> ·
                  <a class="term" href="current-neo-nonsense.html" data-searchitem data-kind="Page" data-title="Current: Neo-Nonsense" data-sub="Detail page" data-key="current neo">Neo-Nonsense</a>.
                </p>
                <p>It tells you the main tension the book is built on.</p>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Branch" data-sub="Where it plays" data-key="branch where it plays">
              <div class="card-head"><span>Branch</span><span class="linkpill" style="pointer-events:none;">where it plays</span></div>
              <div class="card-body">
                <p><strong>The social arena that produces friction.</strong></p>
                <p>Examples: <em>Etiquette</em>, <em>Manners</em>, <em>Workplace</em>, <em>Family</em>.</p>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Engine" data-sub="How it moves" data-key="engine dynamics">
              <div class="card-head"><span>Engine</span><span class="linkpill" style="pointer-events:none;">how it moves</span></div>
              <div class="card-body">
                <p><strong>The comic dynamics that drive scenes and plot.</strong></p>
                <p>Examples: <em>Frustration</em>, <em>Winner</em>, <em>Comeback</em>, <em>Vaudeville</em>.</p>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Toolbox" data-sub="Refine: environment + comedy level" data-key="toolbox refine environment comedy level">
              <div class="card-head"><span>Toolbox</span><a class="linkpill" href="toolbox.html" data-searchitem data-kind="Page" data-title="Toolbox" data-sub="Open toolbox" data-key="toolbox page">Open →</a></div>
              <div class="card-body">
                <p><strong>Refine:</strong> <em>Environment</em> (concrete terrain) + <em>Comedy level</em> (Engine / Thread / Turn).</p>
                <p><span style="opacity:.82">Labs + flags: optional, used when relevant.</span></p>
              </div>
            </article>
          </div>
        </section>

        <!-- =========================================================
             SOCIETY
             ========================================================= -->
        <section class="section" id="society" data-spy
                 data-searchitem data-kind="Current" data-title="Comedy of Society" data-sub="Codes, institutions, social pressure" data-key="society manners etiquette workplace family">
          <div class="kicker">Current</div>
          <h2 class="h2"><a href="current-comedy-of-society.html">Comedy of Society</a></h2>
          <p class="lead">The individual facing the group: codes, institutions, social pressure.</p>
          <p class="sub">
            <a class="term" href="current-comedy-of-society.html">Comedy of Society</a>
            observes how people miss each other — through roles, rituals, politeness,
            hierarchies, and the cost of “fitting in”.
          </p>

          <div class="detail-links" aria-label="Comedy of Society detail links">
            <a class="linkpill" href="current-comedy-of-society.html" data-searchitem data-kind="Page" data-title="Comedy of Society — detail" data-sub="Read in detail" data-key="society detail">Read in detail →</a>
            <a class="linkpill" href="current-comedy-of-society.html#branches" data-searchitem data-kind="Anchor" data-title="Society branches" data-sub="Branches" data-key="society branches">Branches →</a>
            <a class="linkpill" href="current-comedy-of-society.html#engines" data-searchitem data-kind="Anchor" data-title="Society engines" data-sub="Engines" data-key="society engines">Engines →</a>
          </div>

          <div class="grid-3" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Card" data-title="Society branches" data-sub="Etiquette / Manners / Workplace / Family" data-key="society branches etiquette manners workplace family">
              <div class="card-head"><span>Branch (where it plays)</span></div>
              <div class="card-body">
                <ul class="list">
                  <li><strong>Etiquette / Code</strong> (clubs, rituals, roles)</li>
                  <li><strong>Manners</strong> (social embarrassment, romance, cruelty)</li>
                  <li><strong>Workplace</strong> (office, campus, bureaucracy)</li>
                  <li><strong>Family</strong> (domestic pressure, roles, repetition)</li>
                </ul>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Society engines" data-sub="Frustration / Winner / Comeback / Vaudeville" data-key="society engines frustration winner comeback vaudeville">
              <div class="card-head"><span>Engine (how it moves)</span></div>
              <div class="card-body">
                <ul class="list">
                  <li><strong>Frustration</strong> (skid, collapse)</li>
                  <li><strong>Winner</strong> (success paradox)</li>
                  <li><strong>Comeback</strong> (reinvention)</li>
                  <li><strong>Vaudeville</strong> (clockwork misunderstandings)</li>
                </ul>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Refine with the Toolbox" data-sub="Environment + Comedy level" data-key="toolbox refine environment comedy level">
              <div class="card-head"><span>Refine with the Toolbox</span><a class="linkpill" href="toolbox.html">Open →</a></div>
              <div class="card-body">
                <p><strong>Environment</strong> (concrete terrain) + <strong>Comedy level</strong> (Engine / Thread / Turn).</p>
                <p><span style="opacity:.82">Labs and flags are optional layers.</span></p>
              </div>
            </article>
          </div>
        </section>

        <!-- =========================================================
             CRIME
             ========================================================= -->
        <section class="section" id="crime" data-spy
                 data-searchitem data-kind="Current" data-title="Crime Comedy" data-sub="Plans, blunders, escalation, elastic morality" data-key="crime caper heist comic noir cosy">
          <div class="kicker">Current</div>
          <h2 class="h2"><a href="current-comic-crime.html">Crime Comedy</a></h2>
          <p class="lead">Transgression as a comic device: plans, blunders, escalation, elastic morality.</p>
          <p class="sub">
            <a class="term" href="current-comic-crime.html">Crime Comedy</a>
            turns plot into a machine. The laughs come from competence gaps,
            rational criminal thinking, and consequences that outgrow the plan.
          </p>

          <div class="detail-links" aria-label="Crime Comedy detail links">
            <a class="linkpill" href="current-comic-crime.html">Read in detail →</a>
            <a class="linkpill" href="current-comic-crime.html#branches">Branches →</a>
            <a class="linkpill" href="current-comic-crime.html#engines">Engines →</a>
          </div>

          <div class="grid-3" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Card" data-title="Crime branches" data-sub="Caper / Heist / Comic noir / Cosy" data-key="crime branches caper heist comic noir cosy">
              <div class="card-head"><span>Branch (where it plays)</span></div>
              <div class="card-body">
                <ul class="list">
                  <li><strong>Caper</strong> (plans, blunders, escalation)</li>
                  <li><strong>Heist / Burglar</strong> (craft, chaos)</li>
                  <li><strong>Comic noir</strong> (dark edges)</li>
                  <li><strong>Cosy / Amateur</strong> (community, misread clues)</li>
                </ul>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Crime engines" data-sub="Schemer, hapless criminal, comic investigator…" data-key="crime engines schemer hapless investigator">
              <div class="card-head"><span>Engine (how it moves)</span></div>
              <div class="card-body">
                <p>Crime brings its own engines (schemer, hapless criminal, comic investigator…),</p>
                <p>but it can also reuse classic engines: <strong>Frustration</strong>, <strong>Winner</strong>, <strong>Vaudeville</strong>.</p>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Refine with the Toolbox" data-sub="Environment + Comedy level" data-key="toolbox refine environment comedy level">
              <div class="card-head"><span>Refine with the Toolbox</span><a class="linkpill" href="toolbox.html">Open →</a></div>
              <div class="card-body">
                <p><strong>Environment</strong> (concrete terrain) + <strong>Comedy level</strong> (Engine / Thread / Turn).</p>
                <p><span style="opacity:.82">Labs and flags are optional layers.</span></p>
              </div>
            </article>
          </div>
        </section>

        <!-- =========================================================
             NEO
             ========================================================= -->
        <section class="section" id="neo" data-spy
                 data-searchitem data-kind="Current" data-title="Neo-Nonsense" data-sub="Rigour in a world that slips its own logic" data-key="neo nonsense absurd postmodern meta">
          <div class="kicker">Current</div>
          <h2 class="h2"><a href="current-neo-nonsense.html">Neo-Nonsense</a></h2>
          <p class="lead">Vertigo of meaning: rigorous prose in a world that slips its own logic.</p>
          <p class="sub">
            <a class="term" href="current-neo-nonsense.html">Neo-Nonsense</a>
            responds to cracked certainties (systems, science, ideology).
            Comedy can be tonal, structural, or metaphysical — often with cinematic grammar.
          </p>

          <div class="detail-links" aria-label="Neo-Nonsense detail links">
            <a class="linkpill" href="current-neo-nonsense.html">Read in detail →</a>
            <a class="linkpill" href="current-neo-nonsense.html#branches">Branches →</a>
            <a class="linkpill" href="current-neo-nonsense.html#engines">Engines →</a>
          </div>

          <div class="grid-3" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Card" data-title="Neo branches" data-sub="Absurd / Postmodern satire / Comic SF / Meta" data-key="neo branches absurd postmodern comic sf meta">
              <div class="card-head"><span>Branch (where it plays)</span></div>
              <div class="card-body">
                <ul class="list">
                  <li><strong>Absurd / Surreal</strong> (deadpan chaos)</li>
                  <li><strong>Postmodern satire</strong> (systems, paranoia)</li>
                  <li><strong>Comic SF</strong> (cosmic bureaucracy)</li>
                  <li><strong>Meta / Formal</strong> (narration as device)</li>
                </ul>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Neo engines" data-sub="Rigour → crack / Paradox games / Existential self-mockery" data-key="neo engines rigour crack paradox existential">
              <div class="card-head"><span>Engine (how it moves)</span></div>
              <div class="card-body">
                <p>Neo-Nonsense often pushes engines into structural territory:</p>
                <ul class="list">
                  <li><strong>Rigour → crack</strong> (systems glitch)</li>
                  <li><strong>Paradox games</strong> (logical traps)</li>
                  <li><strong>Existential self-mockery</strong> (the “I” vs universe)</li>
                </ul>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Refine with the Toolbox" data-sub="Environment + Comedy level" data-key="toolbox refine environment comedy level">
              <div class="card-head"><span>Refine with the Toolbox</span><a class="linkpill" href="toolbox.html">Open →</a></div>
              <div class="card-body">
                <p><strong>Environment</strong> (concrete terrain) + <strong>Comedy level</strong> (Engine / Thread / Turn).</p>
                <p><span style="opacity:.82">Labs and flags are optional layers.</span></p>
              </div>
            </article>
          </div>
        </section>

        <!-- =========================================================
             Where to start
             ========================================================= -->
        <section class="section" id="how-to-start" data-spy
                 data-searchitem data-kind="Section" data-title="Where to start?" data-sub="Start with a novel or author, then follow the ladder" data-key="where to start orientation">
          <div class="kicker">Orientation</div>
          <h2 class="h2">Where to start?</h2>
          <p class="lead">Start with a novel or an author, then follow Current → Branch → Engine.</p>
          <p class="sub">
            If a book is “hybrid”, the guide still works: the ladder remains stable and the Toolbox
            clarifies centrality (Engine / Thread / Turn).
          </p>

          <div class="grid-2" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Card" data-title="Start with a novel guide" data-sub="Pick one book, identify current/branch/engine" data-key="start novel guide">
              <div class="card-head"><span>Start with a novel guide</span><a class="linkpill" href="novel-guides.html">Open →</a></div>
              <div class="card-body">
                <p>Pick one book. Identify its current, branch, engine. Refine with environment + comedy level.</p>
                <ul class="list">
                  <li>stable comparability</li>
                  <li>clear hybrid handling</li>
                </ul>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Start with an author profile" data-sub="Recurring devices, tempo, engines" data-key="start author profile">
              <div class="card-head"><span>Start with an author profile</span><a class="linkpill" href="author-profiles.html">Open →</a></div>
              <div class="card-body">
                <p>See recurring devices: institutions, tempo, engines, and tonal signatures.</p>
                <ul class="list">
                  <li>Core Comedy / Hybrid / Comic Incursions</li>
                  <li>cross-links to novel guides</li>
                </ul>
              </div>
            </article>
          </div>
        </section>

        <!-- =========================================================
             TOOLBOX (mini)
             ========================================================= -->
        <section class="section" id="toolbox-used" data-spy
                 data-searchitem data-kind="Section" data-title="Toolbox used in every guide" data-sub="Environment + Comedy level" data-key="toolbox used environment comedy level">
          <div class="kicker">Toolbox</div>
          <h2 class="h2">Toolbox used in every guide</h2>
          <p class="lead">Refine every guide with the same terms: Environment + Comedy level.</p>
          <p class="sub">Labs and flags remain optional layers.</p>

          <div class="grid-3" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Card" data-title="Comedy level (novels)" data-sub="Engine · Thread · Turn" data-key="comedy level novels engine thread turn">
              <div class="card-head">
                <span>Comedy level (novels)</span>
                <a class="linkpill" href="toolbox.html#comedy-centrality-novels">Open →</a>
              </div>
              <div class="card-body">
                <p><strong>Comic Engine</strong> · <strong>Comic Thread</strong> · <strong>Comic Turn</strong></p>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Comedy level (authors)" data-sub="Core · Hybrid · Incursions" data-key="comedy level authors core hybrid incursions">
              <div class="card-head">
                <span>Comedy level (authors)</span>
                <a class="linkpill" href="toolbox.html#comedy-centrality-authors">Open →</a>
              </div>
              <div class="card-body">
                <p><strong>Core Comedy</strong> · <strong>Hybrid</strong> · <strong>Comic Incursions</strong></p>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Card" data-title="Environment" data-sub="Milieu, institution, period" data-key="environment milieu institution period">
              <div class="card-head">
                <span>Environment</span>
                <a class="linkpill" href="toolbox.html#environment-labs">Open →</a>
              </div>
              <div class="card-body">
                <p>Concrete terrain: milieu, institution, period — what the book is “standing on”.</p>
              </div>
            </article>
          </div>
        </section>
      </div>

      <!-- Right rail -->
      <aside class="rail" aria-label="In this page (currents)">
        <div class="rail-sticky">
          <header>
            <h3>In this page</h3>
            <p class="rail-meta">
              <span class="rail-pill"><span class="tiny" aria-hidden="true"></span><span id="railHere">You are here: Current → Branch → Engine</span></span>
              <span class="rail-pill">~<span id="railTime">4</span> min</span>
            </p>
            <div class="rail-progress"><span></span></div>
          </header>
          <nav class="toc" id="tocDesktop">
            <a href="#definition">Current → Branch → Engine</a>
            <a href="#society">Comedy of Society</a>
            <a href="#crime">Crime Comedy</a>
            <a href="#neo">Neo-Nonsense</a>
            <a href="#how-to-start">Where to start?</a>
            <a href="#toolbox-used">Toolbox</a>
          </nav>
        </div>
      </aside>
    </div>
  </main>

  <footer class="site-footer" role="contentinfo" aria-label="Site footer">
    <div class="inner">
      <div class="left">
        <strong>The Novel of Comedy (TNoC)</strong> · Currents · definitions and branches.<br>
        <span class="muted">© <span id="year"></span> Boris Jeanson Béteille</span>
      </div>

      <nav class="links" aria-label="Footer links">
        <a href="index.html">Home</a>
        <a href="novel-guides.html">Novel guides</a>
        <a href="author-profiles.html">Author profiles</a>
        <a href="toolbox.html">Toolbox</a>
        <a href="fr/contact">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- Bottom nav mobile -->
  <nav class="bottomnav" aria-label="Bottom navigation">
    <div class="bottomnav-inner">
      <a class="bn-item" href="index.html" id="bnHome"><div class="bn-ic">⌂</div><div class="bn-tx">Home</div></a>
      <a class="bn-item" href="index.html#rows" id="bnBrowse"><div class="bn-ic">⟡</div><div class="bn-tx">Browse</div></a>
      <a class="bn-item active" href="currents.html" id="bnMap"><div class="bn-ic">∿</div><div class="bn-tx">Map</div></a>
      <button class="bn-item" type="button" id="bnSearch"><div class="bn-ic">⌕</div><div class="bn-tx">Search</div></button>
    </div>
  </nav>

  <noscript>
    <div style="max-width:1120px;margin:14px auto;padding:12px 16px;border-radius:14px;background:#fff;color:#000;border:1px solid rgba(0,0,0,.12);">
      JavaScript is disabled — search overlay and scrollspy won’t work. You can still browse the page and open links.
    </div>
  </noscript>

  <script>
    /* Footer year */
    (function(){
      const y = document.getElementById('year');
      if(y) y.textContent = String(new Date().getFullYear());
    })();

    /* If ?q= is present, open search overlay (shared convention) */
    (function(){
      const params = new URLSearchParams(location.search);
      const q = params.get('q');
      if(!q) return;
      window.__tnoc_initial_query = q;
    })();

    /* Search overlay (Ctrl/⌘K) — index all [data-searchitem] */
    (function(){
      const overlay = document.getElementById('searchOverlay');
      const box = overlay?.querySelector('.searchbox');
      const input = document.getElementById('searchInput');
      const results = document.getElementById('searchResults');
      const empty = document.getElementById('searchEmpty');
      const count = document.getElementById('searchCount');

      const openBtn = document.getElementById('openSearch');
      const openBtn2 = document.getElementById('openSearch2');
      const closeBtn = document.getElementById('searchClose');
      const bnSearch = document.getElementById('bnSearch');

      let lastFocus = null;

      function norm(s){
        return (s || "").toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
      }
      function badgeFrom(kind){
        const k = (kind || "Item").trim();
        return (k.slice(0,2) || "IT").toUpperCase();
      }

      const items = Array.from(document.querySelectorAll('[data-searchitem]')).map(el => {
        const kind = el.getAttribute('data-kind') || "Item";
        const title =
          (el.getAttribute('data-title') || "").trim() ||
          (el.querySelector('h1,h2,h3')?.textContent || "").trim() ||
          (el.textContent || "").trim().slice(0, 80) ||
          "Untitled";
        const sub = (el.getAttribute('data-sub') || "").trim();
        const key = (el.getAttribute('data-key') || "").trim();
        const tags = (el.getAttribute('data-tags') || "").trim();
        const href = (el.getAttribute('href') || (el.id ? ("#" + el.id) : "#top")).trim();
        const img = el.querySelector('img')?.getAttribute('src') || "";
        const badge = badgeFrom(kind);
        return { href, title, sub, kind, key, tags, img, badge };
      }).filter(it => it.href && it.title);

      function render(q){
        const nq = norm(q).trim();
        const filtered = !nq ? items.slice(0, 24) : items.filter(it => {
          const hay = norm(it.title + " " + it.sub + " " + it.kind + " " + it.key + " " + it.tags);
          return hay.includes(nq);
        }).slice(0, 70);

        results.innerHTML = filtered.map(it => `
          <a class="result" href="${it.href}">
            <div class="rthumb" aria-hidden="true">
              ${it.img ? `<img src="${it.img}" alt="" loading="lazy" decoding="async">` : `${it.badge}`}
            </div>
            <div class="rtext">
              <div class="rk">${it.kind || "Result"}</div>
              <p class="rt">${it.title || "Untitled"}</p>
              <div class="rs">${it.sub || ""}</div>
            </div>
          </a>
        `).join('');

        const n = filtered.length;
        if(count) count.textContent = String(n);
        if(empty) empty.style.display = (n === 0) ? 'block' : 'none';
      }

      function open(withQuery){
        lastFocus = document.activeElement;
        overlay.classList.add('open');
        overlay.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
        if(input){
          input.value = withQuery || "";
          setTimeout(()=> input.focus(), 40);
        }
        render(input ? input.value : "");
      }

      function close(){
        overlay.classList.remove('open');
        overlay.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
        if(lastFocus && lastFocus.focus) setTimeout(()=> lastFocus.focus(), 0);
      }

      function hookOpen(btn){
        if(!btn) return;
        btn.addEventListener('click', () => open(""));
      }
      hookOpen(openBtn);
      hookOpen(openBtn2);
      hookOpen(bnSearch);

      if(closeBtn) closeBtn.addEventListener('click', close);
      overlay.addEventListener('click', (e) => { if(e.target === overlay) close(); });

      if(input) input.addEventListener('input', () => render(input.value));
      results.addEventListener('click', (e) => { const a = e.target.closest('a'); if(a) close(); });

      window.addEventListener('keydown', (e) => {
        const isOpen = overlay.classList.contains('open');
        const isMac = navigator.platform.toUpperCase().indexOf('MAC')>=0;
        const k = e.key.toLowerCase() === 'k';

        if(k && ((isMac && e.metaKey) || (!isMac && e.ctrlKey))){
          e.preventDefault();
          if(isOpen) close(); else open("");
          return;
        }
        if(!isOpen) return;
        if(e.key === 'Escape'){ close(); return; }

        if(e.key === 'Tab' && box){
          const focusables = Array.from(box.querySelectorAll(
            'a[href], button:not([disabled]), input:not([disabled]), [tabindex]:not([tabindex="-1"])'
          ));
          if(!focusables.length) return;
          const first = focusables[0];
          const last  = focusables[focusables.length - 1];

          if(e.shiftKey && document.activeElement === first){
            e.preventDefault(); last.focus();
          } else if(!e.shiftKey && document.activeElement === last){
            e.preventDefault(); first.focus();
          }
        }
      });

      if(window.__tnoc_initial_query){
        const q = String(window.__tnoc_initial_query || "");
        try { history.replaceState(null, "", location.pathname + location.hash); } catch(e){}
        open(q);
      }
    })();

    /* Paper scrollspy + progress + reading time */
    (function(){
      const linksDesktop = Array.from(document.querySelectorAll('#tocDesktop a'));
      const linksMobile  = Array.from(document.querySelectorAll('#tocMobile a'));
      const sections = Array.from(document.querySelectorAll('[data-spy]'));
      const bar = document.querySelector('.rail-progress > span');
      const railHere = document.getElementById('railHere');
      const railTime = document.getElementById('railTime');
      const mobileMeta = document.getElementById('mobileMeta');

      function getHashId(href){
        if (!href) return "";
        const i = href.indexOf('#');
        return (i === -1) ? "" : href.slice(i + 1);
      }

      function estimateReadingTime(){
        const paper = document.querySelector('main.main');
        if(!paper) return 4;
        const text = paper.innerText || "";
        const words = text.trim().split(/\s+/).filter(Boolean).length;
        return Math.max(3, Math.round(words / 210));
      }

      function updateProgress(){
        if(!bar) return;
        const doc = document.documentElement;
        const st = doc.scrollTop || document.body.scrollTop;
        const sh = doc.scrollHeight - doc.clientHeight;
        const pct = sh > 0 ? (st / sh) * 100 : 0;
        bar.style.width = Math.max(0, Math.min(100, pct)) + "%";
      }

      function setActive(){
        if(!sections.length) return;
        const st = window.scrollY || 0;
        const offset = 150;
        let activeId = sections[0].id;
        sections.forEach(s => { if(st + offset >= s.offsetTop) activeId = s.id; });

        function apply(links){
          links.forEach(a => a.classList.toggle('active', getHashId(a.getAttribute('href')) === activeId));
        }
        apply(linksDesktop);
        apply(linksMobile);

        if(railHere){
          const map = {
            "definition":"Current → Branch → Engine",
            "society":"Comedy of Society",
            "crime":"Crime Comedy",
            "neo":"Neo-Nonsense",
            "how-to-start":"Where to start?",
            "toolbox-used":"Toolbox"
          };
          railHere.textContent = "You are here: " + (map[activeId] || "Currents");
        }
      }

      const minutes = estimateReadingTime();
      if(railTime) railTime.textContent = String(minutes);
      if(mobileMeta) mobileMeta.textContent = "~" + minutes + " min";

      window.addEventListener('scroll', updateProgress, { passive:true });
      window.addEventListener('scroll', setActive, { passive:true });
      window.addEventListener('resize', setActive);

      updateProgress();
      setActive();
    })();
  </script>
</body>
</html>



