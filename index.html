<!DOCTYPE html>
<html lang="en" data-theme="night">
<head>
  <meta charset="utf-8">

  <!-- =========================================================
       SEO / IA micro-optimisation (stable + shareable)
       ========================================================= -->
  <title>The Novel of Comedy (TNoC) — Atlas of humorous fiction (comedy of society · comic crime · neo-nonsense)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0b0b0c">
  <meta name="color-scheme" content="dark light">
  <meta name="description" content="The Novel of Comedy (TNoC) is a streaming-like atlas and critical cartography of humorous fiction: comedy of society, comic crime, and neo-nonsense — with fixed 10-part novel guides, author profiles, and stable citation-ready links.">
  <meta name="author" content="Boris Jeanson Béteille">
  <meta name="robots" content="index,follow,max-image-preview:large">

  <link rel="canonical" href="https://www.thenovelofcomedy.com/">
  <link rel="alternate" hreflang="en" href="https://www.thenovelofcomedy.com/">
  <link rel="alternate" hreflang="fr" href="https://www.thenovelofcomedy.com/fr/">
  <link rel="alternate" hreflang="x-default" href="https://www.thenovelofcomedy.com/">

  <meta property="og:type" content="website">
  <meta property="og:site_name" content="The Novel of Comedy (TNoC)">
  <meta property="og:title" content="The Novel of Comedy — Atlas of humorous fiction">
  <meta property="og:description" content="A living atlas of humorous fiction: comedy of society, comic crime, neo-nonsense. Fixed 10-part guides, author profiles, stable citations.">
  <meta property="og:url" content="https://www.thenovelofcomedy.com/">
  <meta property="og:image" content="https://www.thenovelofcomedy.com/img/wilt.png">
  <meta property="og:image:alt" content="Cover: Wilt — Tom Sharpe (1976)">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="The Novel of Comedy — Atlas of humorous fiction">
  <meta name="twitter:description" content="Comedy of Society · comic crime · neo-nonsense — fixed 10-part guides + author profiles + stable citations.">
  <meta name="twitter:image" content="https://www.thenovelofcomedy.com/img/wilt.png">

  <link rel="icon" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect width="64" height="64" rx="14" fill="%230b0b0c"/><text x="50%25" y="54%25" text-anchor="middle" font-family="Georgia" font-size="18" fill="%23f6f4ef" letter-spacing="2">TNoC</text></svg>'>
  <link rel="preload" as="image" href="img/wilt.png">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "The Novel of Comedy (TNoC)",
    "url": "https://www.thenovelofcomedy.com/",
    "inLanguage": "en",
    "description": "Atlas and critical cartography of humorous fiction: comedy of society, comic crime, neo-nonsense. Fixed 10-part novel guides, author profiles, stable citation-ready links.",
    "publisher": { "@type": "Person", "name": "Boris Jeanson Béteille" },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://www.thenovelofcomedy.com/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <style>
    /* =========================================================
       TNoC — Luxe / Art-book skin (no videos)
       Keep structure. Change aura.
       ========================================================= */

    :root{
      --night:#0b0b0c;
      --ivory:#f6f4ef;
      --paper:#fbfaf7;
      --ink:#0f0f10;
      --smoke:rgba(246,244,239,.62);
      --lineN:rgba(246,244,239,.14);
      --lineN2:rgba(246,244,239,.22);
      --lineD:rgba(11,11,12,.12);
      --softN:rgba(246,244,239,.06);
      --softD:rgba(11,11,12,.05);

      --accent:#bfa77a; /* warm “champagne” */
      --accent2:rgba(191,167,122,.24);

      --w:1120px;
      --pad: clamp(16px, 4.5vw, 28px);

      --tileW: 170px;
      --tileRadius: 18px;

      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --serif: ui-serif, "Iowan Old Style","Palatino Linotype", Palatino, Georgia, serif;

      --cap: 11px;
      --track: .22em;

      --shadowN: 0 24px 90px rgba(0,0,0,.62);
      --shadowTile: 0 16px 50px rgba(0,0,0,.52);
      --shadowTileH: 0 22px 70px rgba(0,0,0,.62);

      --heroH: min(72svh, 720px);
    }

    html,body{
      margin:0; padding:0;
      font-family: var(--sans);
      background: var(--night);
      color: var(--ivory);
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    a:hover{text-decoration:none}
    *{box-sizing:border-box}

    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; scroll-behavior:auto !important; }
    }

    /* Subtle grain */
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.09;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='240' height='240' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
    }

    /* a11y */
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); border:0;
    }
    .skiplink{
      position:absolute; left:14px; top:12px;
      padding:10px 12px;
      border-radius:999px;
      background: var(--ivory);
      color: var(--ink);
      z-index:999;
      transform:translateY(-140%);
      transition:transform .14s ease;
      border:1px solid rgba(0,0,0,.12);
      text-decoration:none;
      font-size:12px;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .skiplink:focus{ transform:translateY(0); }

    /* =========================================================
       TOPBAR — Jewellery / maison
       ========================================================= */
    .topbar{
      position:sticky; top:0; z-index:80;
      backdrop-filter: blur(18px);
      background: color-mix(in srgb, var(--night) 84%, transparent);
      border-bottom:1px solid var(--lineN);
    }
    .topbar-inner{
      max-width:var(--w);
      margin:0 auto;
      padding: 12px var(--pad);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      min-width:0;
    }
    .brand-mark{
      width:34px; height:34px;
      border-radius: 14px;
      border:1px solid var(--lineN2);
      display:flex; align-items:center; justify-content:center;
      font-family: var(--serif);
      font-weight: 700;
      letter-spacing:.18em;
      font-size: 11px;
      background: rgba(255,255,255,.03);
      flex:0 0 auto;
    }
    .brand-text{min-width:0}
    .brand-title{
      font-family: var(--serif);
      font-size: 14px;
      letter-spacing: .12em;
      text-transform: uppercase;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      line-height: 1.05;
    }
    .brand-sub{
      margin-top:3px;
      font-size: 10.5px;
      letter-spacing: .16em;
      text-transform: uppercase;
      color: var(--smoke);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .nav{
      display:flex; gap:10px; align-items:center;
      font-size:12px;
      letter-spacing:.10em;
      text-transform:uppercase;
    }
    .nav a{opacity:.82; padding:8px 6px}
    .nav a:hover{opacity:1}
    .nav a.active{opacity:1; color: rgba(191,167,122,.95);}

    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px;
      padding: 10px 12px;
      border-radius:999px;
      border:1px solid var(--lineN2);
      background: rgba(255,255,255,.04);
      color: var(--ivory);
      cursor:pointer;
      transition: transform .14s ease, opacity .14s ease, border-color .14s ease, background .14s ease;
      user-select:none;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      white-space:nowrap;
    }
    .btn:hover{ transform:translateY(-1px); border-color: rgba(191,167,122,.55); background: rgba(191,167,122,.10); }
    .btn:focus-visible{ outline:2px solid rgba(191,167,122,.55); outline-offset:3px; }

    .btn-primary{
      background: var(--ivory);
      color: var(--ink);
      border-color: transparent;
    }
    .btn-primary:hover{
      background: color-mix(in srgb, var(--ivory) 92%, var(--accent) 8%);
      transform:translateY(-1px);
    }

    .kbd{
      font-size:10px;
      opacity:.8;
      padding:3px 7px;
      border-radius:999px;
      border:1px solid var(--lineN);
      background: rgba(0,0,0,.22);
      letter-spacing:.06em;
      text-transform:none;
    }

    @media(max-width:860px){
      .brand-sub{display:none}
      .nav a{display:none}
      .kbd{display:none}
    }

    /* =========================================================
       HERO — “gallery wall”, calmer, more couture
       ========================================================= */
    .hero{
      position:relative;
      border-bottom:1px solid var(--lineN);
      overflow:hidden;
      min-height: var(--heroH);
    }

    .marquee-wall{
      position:absolute; inset:0;
      opacity:.55;
      filter: grayscale(1) contrast(1.08);
      pointer-events:none;
      transform:translateZ(0);
    }
    .marquee-wall::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 520px at 18% 16%, rgba(191,167,122,.14), transparent 60%),
        radial-gradient(900px 520px at 86% 30%, rgba(255,255,255,.06), transparent 65%),
        linear-gradient(90deg, rgba(0,0,0,.90) 0%, rgba(0,0,0,.66) 46%, rgba(0,0,0,.24) 78%, rgba(0,0,0,0) 100%);
      z-index:2;
    }
    .marquee-wall::after{
      content:"";
      position:absolute; inset:auto 0 0 0; height:280px;
      background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.92));
      z-index:2;
    }

    .marquee-strip{
      position:absolute; left:0; right:0;
      display:flex;
      gap:12px;
      padding:12px 0;
      z-index:1;
      will-change:transform;
      overflow:hidden;
    }
    .marquee-strip.top{ top:24px; transform:rotate(-2deg) }
    .marquee-strip.mid{ top:40%; transform:rotate(1deg) }
    .marquee-strip.bot{ bottom:44px; transform:rotate(-1.5deg) }

    /* Make inner track wide and continuous */
    .marquee-track{
      display:flex;
      gap:12px;
      flex:0 0 auto;
      width:max-content;
      animation:marquee 54s linear infinite;
    }
    .marquee-strip.mid .marquee-track{ animation-duration:64s; animation-direction:reverse; opacity:.95; }
    .marquee-strip.bot .marquee-track{ animation-duration:72s; opacity:.90; }

    @keyframes marquee{
      0%{ transform:translateX(0) }
      100%{ transform:translateX(-50%) }
    }

    .mini-poster{
      width:116px;
      aspect-ratio:3/4;
      border-radius: 18px;
      border:1px solid rgba(246,244,239,.16);
      background:#0f0f10;
      overflow:hidden;
      box-shadow: 0 14px 38px rgba(0,0,0,.58);
    }
    .mini-poster img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      filter: grayscale(1) contrast(1.02);
    }

    /* ✅ UPDATED: one-column hero, no featured card */
    .hero-inner{
      position:relative;
      z-index:5;
      max-width:var(--w);
      margin:0 auto;
      padding: 30px var(--pad) 18px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
      align-items:end;
      min-height: var(--heroH);
    }

    /* ✅ UPDATED: allow full width */
    .hero-card{
      border-radius: 22px;
      border:1px solid rgba(246,244,239,.14);
      background: rgba(0,0,0,.36);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadowN);
      padding: 18px 18px 16px;
      max-width: none;
    }

    .hero-kicker{
      font-size: var(--cap);
      letter-spacing: var(--track);
      text-transform: uppercase;
      color: rgba(246,244,239,.78);
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin-bottom: 10px;
    }
    .dot{width:4px;height:4px;border-radius:99px;background: rgba(246,244,239,.86);opacity:.8}

    .hero-title{
      margin:0;
      font-family: var(--serif);
      font-weight: 700;
      letter-spacing: -.02em;
      line-height: 1.03;
      font-size: clamp(30px, 6.2vw, 56px);
    }
    .hero-title .thin{ font-weight: 500; opacity:.92; }
    .hero-title .bold{ font-weight: 780; }

    .hero-tag{
      margin: 10px 0 0;
      font-family: var(--serif);
      font-size: clamp(14px, 3.9vw, 18px);
      line-height: 1.55;
      color: rgba(246,244,239,.78);
      max-width: 60ch;
    }
    .hero-tag em{ font-style: normal; opacity:.92 }

    .hero-actions{
      margin-top: 14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }

    /* ✅ UPDATED: mobile hero height (bonus: rows appear sooner) */
    @media(max-width:980px){
      .hero-inner{
        padding: 18px var(--pad) 16px;
        min-height: min(58svh, 600px);
        align-items:start;
      }
    }

    /* =========================================================
       ROWS — make it “gallery rails”
       ========================================================= */
    .rows{
      max-width:var(--w);
      margin:0 auto;
      padding: 12px var(--pad) 14px;
      overflow-x:hidden;
    }

    .row{ margin-top: 18px; scroll-margin-top: 120px; }

    .row-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      margin:0 0 10px;
    }
    .row-title{
      margin:0;
      font-family: var(--serif);
      font-size: 14px;
      letter-spacing: .18em;
      text-transform: uppercase;
      opacity:.92;
    }
    .row-sub{
      margin:6px 0 0;
      font-size: 13px;
      line-height: 1.4;
      color: rgba(246,244,239,.70);
      max-width: 88ch;
    }
    .row-hint{
      font-size: 11px;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: rgba(246,244,239,.62);
      display:flex;
      gap:10px;
      align-items:center;
      flex:0 0 auto;
    }
    .row-hint a{ color: rgba(246,244,239,.70); }
    .row-hint a:hover{ color: rgba(246,244,239,.92); }

    .row-shell{
      position:relative;
      border-radius: 22px;
      border:1px solid rgba(246,244,239,.10);
      background: linear-gradient(180deg, rgba(246,244,239,.04), rgba(0,0,0,.36));
      overflow:hidden;
    }
    .row-shell::before,
    .row-shell::after{
      content:"";
      position:absolute; top:0; bottom:0; width:34px;
      pointer-events:none; z-index:2;
    }
    .row-shell::before{ left:0; background:linear-gradient(90deg, rgba(0,0,0,.74), rgba(0,0,0,0)); }
    .row-shell::after{ right:0; background:linear-gradient(270deg, rgba(0,0,0,.74), rgba(0,0,0,0)); }

    .row-track{
      display:flex;
      gap:12px;
      overflow:auto;
      padding: 14px 14px 12px;
      scroll-snap-type:x mandatory;
      -webkit-overflow-scrolling:touch;
      scroll-padding-left:14px;
      scroll-padding-right:14px;
    }
    .row-track::-webkit-scrollbar{ height:10px; }
    .row-track::-webkit-scrollbar-thumb{
      background: rgba(246,244,239,.14);
      border-radius:999px;
    }

    .row-progress{
      height:6px;
      margin:0 14px 14px;
      border-radius:999px;
      background: rgba(246,244,239,.07);
      border:1px solid rgba(246,244,239,.10);
      overflow:hidden;
    }
    .row-progress > span{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(191,167,122,.95), rgba(246,244,239,.18));
      opacity:.92;
    }

    .tile{
      scroll-snap-align:start;
      flex:0 0 var(--tileW);
      border-radius: var(--tileRadius);
      border:1px solid rgba(246,244,239,.16);
      background:#0f0f10;
      overflow:hidden;
      position:relative;
      box-shadow: var(--shadowTile);
      transform:translateY(0);
      transition:transform .16s ease, box-shadow .16s ease, border-color .16s ease, filter .16s ease;
    }
    .tile:hover{
      transform:translateY(-2px);
      box-shadow: var(--shadowTileH);
      border-color: rgba(191,167,122,.40);
      filter: contrast(1.02);
    }
    .tile:focus-visible{
      outline:2px solid rgba(191,167,122,.55);
      outline-offset:3px;
    }

    .tile-media{ width:100%; aspect-ratio:3/4; background:#0f0f10; }
    .tile-media img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  filter: saturate(.96) contrast(1.02);
  transition: filter .18s ease;
}
.tile:hover .tile-media img{
  filter: saturate(1.03) contrast(1.03);
}
    .tile.is-portrait .tile-media{ aspect-ratio:4/5; }

    .tile-meta{
      position:absolute; left:10px; right:10px; bottom:10px;
      padding:8px 9px 7px;
      border-radius: 14px;
      background: rgba(0,0,0,.56);
      border:1px solid rgba(246,244,239,.12);
      backdrop-filter: blur(10px);
      color:#fff;
    }
    .tile-meta .k{
      font-size: 9.5px;
      letter-spacing: .18em;
      text-transform: uppercase;
      opacity:.78;
      margin:0 0 3px;
      line-height:1.15;
    }
    .tile-meta .t{
      font-family: var(--serif);
      font-size: 12.5px;
      font-weight: 720;
      line-height:1.15;
      margin:0;
      letter-spacing:-.01em;
    }
    .tile-meta .s{
      font-size: 11px;
      opacity:.78;
      margin-top:3px;
      line-height:1.2;
    }

    @media(max-width:600px){
      :root{ --tileW:176px; }
      .row-hint{ display:none; }
      .rows{ padding-bottom:70px; }
      body{ padding-bottom:72px; }
    }

    /* =========================================================
       Divider — black to paper
       ========================================================= */
    .stitch-divider{
      position:relative;
      height:74px;
      background: linear-gradient(180deg, rgba(11,11,12,1) 0%, rgba(11,11,12,1) 38%, rgba(251,250,247,1) 100%);
      border-top:1px solid rgba(246,244,239,.08);
    }
    .stitch-divider::before{
      content:"";
      position:absolute; left:0; right:0; top:26px;
      height:1px;
      background:
        repeating-linear-gradient(90deg,
          rgba(191,167,122,.65) 0, rgba(191,167,122,.65) 12px,
          rgba(246,244,239,.12) 12px, rgba(246,244,239,.12) 22px);
      opacity:.42;
    }
    .stitch-badge{
      position:absolute; left:50%; top:16px;
      transform:translateX(-50%);
      padding:7px 12px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(246,244,239,.94);
      color: rgba(0,0,0,.70);
      font-size: 10.5px;
      letter-spacing: .18em;
      text-transform: uppercase;
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 26px rgba(0,0,0,.10);
      white-space:nowrap;
    }

    /* =========================================================
       PAPER LAYER
       ========================================================= */
    .main{
      background: var(--paper);
      color: var(--ink);
    }
    .main-inner{
      max-width: var(--w);
      margin:0 auto;
      padding: 26px var(--pad) 42px;
      display:grid;
      grid-template-columns: 1fr minmax(280px, .54fr);
      gap: 20px;
      align-items:start;
    }
    @media(max-width:960px){
      .main-inner{ grid-template-columns:1fr; }
    }

    .section{
      padding: 24px 0;
      border-bottom: 1px solid rgba(11,11,12,.08);
      scroll-margin-top:110px;
    }
    .section:last-of-type{ border-bottom:none; padding-bottom: 10px; }

    .kicker{
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.58);
    }
    .h2{
      font-family: var(--serif);
      margin: 8px 0 8px;
      font-size: 28px;
      line-height: 1.08;
      letter-spacing: -.01em;
    }
    .lead{
      font-family: var(--serif);
      margin:0;
      font-size: 16px;
      line-height: 1.7;
      color: rgba(11,11,12,.74);
      max-width: 84ch;
    }
    .sub{
      margin: 12px 0 0;
      font-size: 13.5px;
      line-height: 1.65;
      color: rgba(11,11,12,.60);
      max-width: 84ch;
    }

    .grid-3{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px; }
    .grid-2{ display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:14px; }
    @media(max-width:900px){ .grid-3,.grid-2{ grid-template-columns:1fr; } }

    .card{
      background: rgba(255,255,255,.70);
      border-radius: 18px;
      border: 1px solid rgba(11,11,12,.10);
      box-shadow: 0 10px 34px rgba(0,0,0,.06);
      padding: 14px 14px 12px;
    }
    .card-head{
      display:flex; align-items:baseline; justify-content:space-between; gap:10px;
      font-family: var(--serif);
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 8px;
      letter-spacing: -.01em;
    }
    .card-body{
      font-size: 13.5px;
      line-height: 1.65;
      color: rgba(11,11,12,.78);
    }
    .card-body p{ margin:8px 0; }
    .linkpill{
      display:inline-flex; align-items:center; gap:8px;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.68);
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(11,11,12,.12);
      background: rgba(11,11,12,.02);
      text-decoration:none;
      transition: transform .14s ease, background .14s ease, border-color .14s ease;
      white-space:nowrap;
    }
    .linkpill:hover{
      transform: translateY(-1px);
      border-color: rgba(191,167,122,.55);
      background: rgba(191,167,122,.10);
    }
    .list{
      margin: 10px 0 0;
      padding-left: 17px;
      font-size: 13.5px;
      color: rgba(11,11,12,.78);
    }

    /* mobile toc */
    .mobile-toc{
      display:none;
      margin: 10px 0 0;
      border-radius: 18px;
      border:1px solid rgba(11,11,12,.10);
      background: rgba(255,255,255,.78);
      box-shadow: 0 10px 34px rgba(0,0,0,.06);
      overflow:hidden;
    }
    .mobile-toc summary{
      cursor:pointer;
      list-style:none;
      padding: 12px 12px;
      font-weight: 700;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.72);
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      background: linear-gradient(180deg, rgba(11,11,12,.01), rgba(11,11,12,.03));
    }
    .mobile-toc summary::-webkit-details-marker{ display:none; }
    .mobile-toc .toc{
      padding: 10px 10px 12px;
      display:grid;
      gap:6px;
    }
    .mobile-toc .toc a{
      padding: 10px 10px;
      border-radius: 14px;
      border:1px solid rgba(11,11,12,.10);
      background: rgba(11,11,12,.015);
      font-size: 13px;
      color: rgba(11,11,12,.78);
      text-decoration:none;
    }
    .mobile-toc .toc a.active{
      border-color: rgba(191,167,122,.70);
      background: rgba(191,167,122,.14);
      color: #000;
      font-weight: 700;
    }
    @media(max-width:960px){ .mobile-toc{ display:block; } }

    /* rail */
    .rail{
      background: rgba(255,255,255,.78);
      border-radius: 18px;
      border:1px solid rgba(11,11,12,.10);
      box-shadow: 0 10px 34px rgba(0,0,0,.06);
      overflow:hidden;
    }
    .rail-sticky{ position:static; }
    @media(min-width:960px){ .rail-sticky{ position:sticky; top:88px; } }
    .rail header{
      padding: 14px 14px 12px;
      border-bottom:1px solid rgba(11,11,12,.08);
      background: linear-gradient(180deg, rgba(11,11,12,.01), rgba(11,11,12,.03));
    }
    .rail header h3{
      margin:0 0 6px;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(11,11,12,.78);
      font-family: var(--serif);
      font-weight: 700;
    }
    .rail-meta{
      font-size:12px;
      color: rgba(11,11,12,.58);
      display:flex; flex-wrap:wrap;
      gap:8px 10px;
      align-items:center;
      margin:0;
    }
    .rail-pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border-radius:999px;
      border:1px solid rgba(11,11,12,.10);
      background: rgba(11,11,12,.02);
      font-size: 10px;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: rgba(11,11,12,.62);
      white-space:nowrap;
    }
    .rail-pill .tiny{
      width:6px; height:6px; border-radius:99px;
      background: rgba(191,167,122,.95);
      box-shadow:0 0 0 5px rgba(191,167,122,.18);
    }
    .rail-progress{
      margin-top:10px;
      height:6px;
      border-radius:999px;
      background: rgba(11,11,12,.03);
      border:1px solid rgba(11,11,12,.06);
      overflow:hidden;
    }
    .rail-progress > span{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(191,167,122,.95), rgba(11,11,12,.35));
    }
    .toc{
      padding: 10px;
      display:grid;
      gap:6px;
    }
    .toc a{
      padding: 10px 10px;
      border-radius: 14px;
      border:1px solid transparent;
      background: rgba(11,11,12,.015);
      font-size: 13px;
      color: rgba(11,11,12,.78);
      text-decoration:none;
    }
    .toc a:hover{
      border-color: rgba(191,167,122,.40);
      background: rgba(191,167,122,.10);
    }
    .toc a.active{
      border-color: rgba(191,167,122,.70);
      background: rgba(191,167,122,.14);
      color:#000;
      font-weight:700;
    }

    /* =========================================================
       SEARCH OVERLAY — unified (data-searchitem)
       ========================================================= */
    .overlay{
      position:fixed;
      inset:0;
      z-index:200;
      display:none;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(16px);
      align-items:flex-start;
      justify-content:center;
      padding: 84px var(--pad) 16px;
    }
    .overlay.open{ display:flex; }
    .searchbox{
      width:min(900px, 100%);
      border-radius: 22px;
      border:1px solid rgba(246,244,239,.16);
      background: rgba(0,0,0,.50);
      box-shadow: 0 28px 110px rgba(0,0,0,.78);
      overflow:hidden;
    }
    .search-top{
      padding: 12px 12px 10px;
      border-bottom:1px solid rgba(246,244,239,.10);
      display:flex; gap:10px; align-items:center;
    }
    .search-top input{
      width:100%;
      padding: 12px 12px;
      border-radius: 16px;
      border:1px solid rgba(246,244,239,.16);
      background: rgba(246,244,239,.06);
      color: var(--ivory);
      outline:none;
      font-size: 14px;
    }
    .search-top input::placeholder{ color: rgba(246,244,239,.55); }
    .search-close{
      flex:0 0 auto;
      padding: 10px 12px;
      border-radius: 16px;
      border:1px solid rgba(246,244,239,.18);
      background: rgba(246,244,239,.06);
      color: var(--ivory);
      cursor:pointer;
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
    }
    .search-meta{
      padding: 10px 12px 12px;
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      color: rgba(246,244,239,.70);
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .results{
      max-height:min(54vh, 520px);
      overflow:auto;
      padding: 10px 10px 12px;
      display:grid;
      gap:8px;
    }
    .result{
      display:flex;
      gap:10px;
      align-items:center;
      border-radius: 18px;
      border:1px solid rgba(246,244,239,.12);
      background: rgba(246,244,239,.04);
      padding: 10px;
      text-decoration:none;
    }
    .result:hover{ border-color: rgba(191,167,122,.45); background: rgba(191,167,122,.08); }
    .rthumb{
      width:48px;
      height:48px;
      border-radius: 14px;
      overflow:hidden;
      background: rgba(246,244,239,.06);
      border:1px solid rgba(246,244,239,.14);
      flex:0 0 auto;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: var(--serif);
      color: rgba(246,244,239,.82);
      letter-spacing: .10em;
      text-transform: uppercase;
      font-size: 12px;
    }
    .rthumb img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      filter:saturate(.96) contrast(1.02);
    }
    .rtext{ min-width:0; }
    .rtext .rk{
      font-size: 9.5px;
      letter-spacing: .18em;
      text-transform: uppercase;
      opacity:.76;
      margin:0 0 2px;
    }
    .rtext .rt{
      margin:0;
      font-family: var(--serif);
      font-weight: 780;
      font-size: 13px;
      line-height: 1.2;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .rtext .rs{
      margin-top:3px;
      font-size: 12px;
      opacity:.78;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .empty{
      padding: 18px 12px;
      text-align:center;
      color: rgba(246,244,239,.78);
      font-size: 12px;
      letter-spacing: .06em;
    }

    /* =========================================================
       BOTTOM NAV (mobile)
       ========================================================= */
    .bottomnav{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:120;
      display:none;
      background: color-mix(in srgb, var(--night) 86%, transparent);
      border-top:1px solid rgba(246,244,239,.10);
      backdrop-filter: blur(18px);
    }
    .bottomnav-inner{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      padding: 10px 10px 12px;
      gap: 8px;
    }
    .bn-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:6px;
      padding: 10px 6px;
      border-radius: 16px;
      color: var(--ivory);
      text-decoration:none;
      opacity:.86;
      border:1px solid rgba(246,244,239,.10);
      cursor:pointer;
      background: rgba(246,244,239,.03);
      font-size: 11px;
      letter-spacing: .06em;
    }
    .bn-item:hover{ opacity:1; }
    .bn-item.active{
      opacity:1;
      border-color: rgba(191,167,122,.55);
      background: rgba(191,167,122,.12);
    }
    .bn-ic{ font-size:16px; line-height:1; }
    .bn-tx{ font-size:11px; }
    @media(max-width:600px){ .bottomnav{ display:block; } }

    /* =========================================================
       FOOTER — restrained
       ========================================================= */
    .site-footer{
      background: rgba(11,11,12,1);
      color: rgba(246,244,239,.86);
      border-top:1px solid rgba(246,244,239,.10);
    }
    .site-footer .inner{
      max-width:var(--w);
      margin:0 auto;
      padding: 18px var(--pad) 24px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
    }
    .site-footer .left{
      min-width:0;
      font-size: 12px;
      line-height:1.5;
      letter-spacing: .02em;
    }
    .site-footer .left strong{
      font-family: var(--serif);
      font-weight: 780;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .site-footer .left .muted{ opacity:.78; }

    .site-footer .links{
      display:flex;
      flex-wrap:wrap;
      justify-content:flex-end;
      gap: 10px 14px;
      font-size: 11px;
      letter-spacing: .12em;
      text-transform: uppercase;
      opacity:.88;
    }
    .site-footer .links a{
      color:inherit;
      text-decoration:none;
      padding:4px 0;
      opacity:.82;
    }
    .site-footer .links a:hover{ opacity:1; text-decoration:none; color: rgba(191,167,122,.95); }

    @media(max-width:900px){
      .site-footer .inner{
        flex-direction:column;
        align-items:flex-start;
      }
      .site-footer .links{ justify-content:flex-start; }
    }
  </style>
</head>

<body id="top">
  <a class="skiplink" href="#rows">Skip to browse rows</a>

  <!-- Search overlay -->
  <div class="overlay" id="searchOverlay" aria-hidden="true">
    <div class="searchbox" role="dialog" aria-modal="true" aria-label="Search TNoC">
      <div class="search-top">
        <input id="searchInput" type="text" placeholder="Search a book, an author, or a section…" autocomplete="off">
        <button class="search-close" id="searchClose" type="button" aria-label="Close search">Esc</button>
      </div>

      <!-- ✅ change: aria-live for count -->
      <div class="search-meta">
        <div><strong>Tip</strong> · Ctrl+K / ⌘K · Esc</div>
        <div aria-live="polite"><span id="searchCount">0</span> results</div>
      </div>

      <div class="results" id="searchResults" aria-label="Search results"></div>
      <div class="empty" id="searchEmpty" style="display:none;">No results. Try another spelling.</div>
    </div>
  </div>

  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <a class="brand" href="index.html" aria-label="The Novel of Comedy home">
        <div class="brand-mark">TNoC</div>
        <div class="brand-text">
          <div class="brand-title">The Novel of Comedy</div>
          <div class="brand-sub">First atlas &amp; cartography of humorous fiction</div>
        </div>
      </a>

      <nav class="nav" aria-label="Navigation">
        <a class="active" href="#rows" data-searchitem data-kind="Page" data-title="Browse rows" data-sub="Streaming rows on the homepage" data-key="browse rows home">Browse</a>
        <a href="#paper" data-searchitem data-kind="Page" data-title="Paper layer" data-sub="Editorial section of the homepage" data-key="paper editorial homepage">Paper</a>
        <a href="novel-guides.html" data-searchitem data-kind="Page" data-title="Novel guides" data-sub="Fixed 10-part matrix guides" data-key="novel guides ten chapters matrix">Novels</a>
        <a href="author-profiles.html" data-searchitem data-kind="Page" data-title="Author profiles" data-sub="Profiles: how writers build humor" data-key="author profiles portraits method">Authors</a>
        <a href="currents.html" data-searchitem data-kind="Page" data-title="Currents" data-sub="Three currents + branches" data-key="currents society crime neo">Currents</a>
        <a href="toolbox.html" data-searchitem data-kind="Page" data-title="Toolbox" data-sub="Vocabulary reused everywhere" data-key="toolbox comic engine environment labs">Toolbox</a>
        <button class="btn" id="openSearch" type="button" aria-label="Open search">
          Search <span class="kbd">Ctrl/⌘ K</span>
        </button>
      </nav>
    </div>
  </header>

  <section class="hero" aria-label="Hero (streaming wall)">
    <div class="marquee-wall" aria-hidden="true">
      <div class="marquee-strip top">
        <div class="marquee-track" id="mq1"></div>
      </div>
      <div class="marquee-strip mid">
        <div class="marquee-track" id="mq2"></div>
      </div>
      <div class="marquee-strip bot">
        <div class="marquee-track" id="mq3"></div>
      </div>
    </div>

    <!-- ✅ UPDATED: only hero-card (no featured module) -->
    <div class="hero-inner">
      <div class="hero-card" data-searchitem data-kind="Page" data-title="The Novel of Comedy" data-sub="Homepage hero" data-key="home hero atlas cartography">
        <div class="hero-kicker"><span class="dot"></span> Atlas <span class="dot"></span> Guides <span class="dot"></span> Cartography</div>

        <h1 class="hero-title">
          <span class="thin">The</span> <span class="bold">Novel</span> <span class="thin">of</span> <span class="bold">Comedy</span>
        </h1>

        <p class="hero-tag">
          Comedy of Society · Comic Crime · Neo-Nonsense.
        </p>

        <div class="hero-actions">
          <a class="btn btn-primary" href="novel-guides.html">Open novel guides</a>
          <a class="btn" href="author-profiles.html">Open author profiles</a>
          <a class="btn" href="currents.html">Currents</a>
          <a class="btn" href="toolbox.html">Toolbox</a>
          <button class="btn" id="openSearch2" type="button">Search</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ROWS -->
  <section class="rows" id="rows" aria-label="Browse rows (streaming)">

    <!-- Row 1 -->
    <div class="row" id="row-society" data-rowname="Comedy of Society" aria-label="Comedy of Society row"
         data-searchitem data-kind="Row" data-title="Comedy of Society" data-sub="Institutions collide with private life — satire & manners" data-key="society satire manners institutions">
      <div class="row-head">
        <div class="row-left">
          <h2 class="row-title">Comedy of Society</h2>
          <p class="row-sub">Institutions collide with private life — satire &amp; manners.</p>
        </div>
        <div class="row-hint">
          <a href="currents.html#society">All →</a>
          <span style="opacity:.55;">Swipe</span>
        </div>
      </div>

      <div class="row-shell" data-row>
        <div class="row-track" aria-label="Comedy of Society carousel">

          <a class="tile" data-searchitem href="the-commitments-fiche.html"
             data-kind="Novel" data-title="The Commitments"
             data-current="Society" data-branch="Satire"
             data-author="Roddy Doyle" data-year="1987"
             data-sub="Roddy Doyle · 1987"
             data-tags="society satire">
            <div class="tile-media"><img src="the-commitments.png" alt="Cover of The Commitments" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Satire</div>
              <div class="t">The Commitments</div>
              <div class="s">Roddy Doyle · 1987</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="wilt-fiche.html"
             data-kind="Novel" data-title="Wilt"
             data-current="Society" data-branch="Satire"
             data-author="Tom Sharpe" data-year="1976"
             data-sub="Tom Sharpe · 1976"
             data-tags="society satire">
            <div class="tile-media"><img src="wilt.png" alt="Cover of Wilt" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Satire</div>
              <div class="t">Wilt</div>
              <div class="s">Tom Sharpe · 1976</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="poor-souls-fiche.html"
             data-kind="Novel" data-title="Poor Souls"
             data-current="Society" data-branch="Satire"
             data-author="Joseph Connolly" data-year="1995"
             data-sub="Joseph Connolly · 1995"
             data-tags="society">
            <div class="tile-media"><img src="poor-souls.png" alt="Cover of Poor Souls" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Satire</div>
              <div class="t">Poor Souls</div>
              <div class="s">Joseph Connolly · 1995</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="what-a-carve-up-fiche.html"
             data-kind="Novel" data-title="What a Carve Up!"
             data-current="Society" data-branch="Satire"
             data-author="Jonathan Coe" data-year="1994"
             data-sub="Jonathan Coe · 1994"
             data-tags="society satire">
            <div class="tile-media"><img src="img/what-a-carve-up.png" alt="Cover of What a Carve Up!" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Satire</div>
              <div class="t">What a Carve Up!</div>
              <div class="s">Jonathan Coe · 1994</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-sportswriter-fiche.html"
             data-kind="Novel" data-title="The Sportswriter"
             data-current="Society" data-branch="Manners"
             data-author="Richard Ford" data-year="1986"
             data-sub="Richard Ford · 1986"
             data-tags="society">
            <div class="tile-media"><img src="img/the-sportswriter.png" alt="Cover of The Sportswriter" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Manners</div>
              <div class="t">The Sportswriter</div>
              <div class="s">Richard Ford · 1986</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="small-world-fiche.html"
             data-kind="Novel" data-title="Small World"
             data-current="Society" data-branch="Campus"
             data-author="David Lodge" data-year="1984"
             data-sub="David Lodge · 1984"
             data-tags="society manners campus">
            <div class="tile-media"><img src="img/small-world.png" alt="Cover of Small World" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Campus</div>
              <div class="t">Small World</div>
              <div class="s">David Lodge · 1984</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-girls-of-slender-means-fiche.html"
             data-kind="Novel" data-title="The Girls of Slender Means"
             data-current="Society" data-branch="Manners"
             data-author="Muriel Spark" data-year="1963"
             data-sub="Muriel Spark · 1963"
             data-tags="society manners">
            <div class="tile-media"><img src="img/the-girls-of-slender-means.png" alt="Cover of The Girls of Slender Means" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Manners</div>
              <div class="t">Girls of Slender Means</div>
              <div class="s">Muriel Spark · 1963</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="babycake-fiche.html"
             data-kind="Novel" data-title="Babycakes"
             data-current="Society" data-branch="Manners"
             data-author="Armistead Maupin" data-year="1984"
             data-sub="Armistead Maupin · 1984"
             data-tags="society">
            <div class="tile-media"><img src="img/babycake.png" alt="Cover of Babycakes" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Manners</div>
              <div class="t">Babycakes</div>
              <div class="s">Armistead Maupin · 1984</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="high-fidelity-fiche.html"
             data-kind="Novel" data-title="High Fidelity"
             data-current="Society" data-branch="Manners"
             data-author="Nick Hornby" data-year="1995"
             data-sub="Nick Hornby · 1995"
             data-tags="society">
            <div class="tile-media"><img src="img/high-fidelity.png" alt="Cover of High Fidelity" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Manners</div>
              <div class="t">High Fidelity</div>
              <div class="s">Nick Hornby · 1995</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-code-of-the-woosters-fiche.html"
             data-kind="Novel" data-title="The Code of the Woosters"
             data-current="Society" data-branch="Manners"
             data-author="P. G. Wodehouse" data-year="1938"
             data-sub="P. G. Wodehouse · 1938"
             data-tags="society manners">
            <div class="tile-media"><img src="the-code-of-the-woosters.png" alt="Cover of The Code of the Woosters" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Manners</div>
              <div class="t">Woosters</div>
              <div class="s">P. G. Wodehouse · 1938</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-old-devils-fiche.html"
             data-kind="Novel" data-title="The Old Devils"
             data-current="Society" data-branch="Manners"
             data-author="Kingsley Amis" data-year="1986"
             data-sub="Kingsley Amis · 1986"
             data-tags="society">
            <div class="tile-media"><img src="img/the-old-devils.png" alt="Cover of The Old Devils" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Manners</div>
              <div class="t">The Old Devils</div>
              <div class="s">Kingsley Amis · 1986</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-bonfire-of-the-vanities-fiche.html"
             data-kind="Novel" data-title="The Bonfire of the Vanities"
             data-current="Society" data-branch="Satire"
             data-author="Tom Wolfe" data-year="1987"
             data-sub="Tom Wolfe · 1987"
             data-tags="society satire">
            <div class="tile-media"><img src="img/the-bonfire-of-the-vanities.png" alt="Cover of The Bonfire of the Vanities" loading="lazy" decoding="async"></div>
            <div class="tile-meta">
              <div class="k">Society · Satire</div>
              <div class="t">Bonfire of the Vanities</div>
              <div class="s">Tom Wolfe · 1987</div>
            </div>
          </a>
        </div>

        <div class="row-progress" aria-hidden="true"><span></span></div>
      </div>
    </div>

    <!-- Row — Author Profiles -->
    <div class="row" id="row-authors" data-rowname="Author Profiles" aria-label="Author Profiles row"
         data-searchitem data-kind="Row" data-title="Author Profiles row" data-sub="Portraits + method: voice, rhythm, institutions, devices" data-key="author profiles row portraits method">
      <div class="row-head">
        <div class="row-left">
          <h2 class="row-title">Author Profiles</h2>
          <p class="row-sub">Portraits + method : how writers build humor (voice, rhythm, institutions, devices)</p>
        </div>
        <div class="row-hint">
          <a href="author-profiles.html">All →</a>
          <span style="opacity:.55;">Swipe</span>
        </div>
      </div>

      <div class="row-shell" data-row>
        <div class="row-track" aria-label="Author Profiles carousel">
          <a class="tile is-portrait" data-searchitem href="author-profiles.html#kurt-vonnegut"
             data-kind="Author" data-title="Kurt Vonnegut" data-sub="Author profile"
             data-tags="author neo absurd satire">
            <div class="tile-media"><img src="img/kurt-vonnegut-portrait.jpg" alt="Portrait of Kurt Vonnegut" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Vonnegut</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#tom-sharpe"
             data-kind="Author" data-title="Tom Sharpe" data-sub="Author profile"
             data-tags="author society satire frustration comedy">
            <div class="tile-media"><img src="tom-sharpe-portrait.jpg" alt="Portrait of Tom Sharpe" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Sharpe</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#francoise-sagan"
             data-kind="Author" data-title="Françoise Sagan" data-sub="Author profile"
             data-tags="author society manners irony">
            <div class="tile-media"><img src="img/francoise-sagan-portrait.jpg" alt="Portrait of Françoise Sagan" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Sagan</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#perceval"
             data-kind="Author" data-title="Perceval" data-sub="Author profile"
             data-tags="author outsider">
            <div class="tile-media"><img src="img/perceval-portrait.jpg" alt="Portrait of Perceval" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Perceval</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#p-g-wodehouse"
             data-kind="Author" data-title="P. G. Wodehouse" data-sub="Author profile"
             data-tags="author society manners">
            <div class="tile-media"><img src="img/pg-wodehouse-portrait.jpg" alt="Portrait of P. G. Wodehouse" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Wodehouse</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#douglas-adams"
             data-kind="Author" data-title="Douglas Adams" data-sub="Author profile"
             data-tags="author neo nonsense absurd">
            <div class="tile-media"><img src="img/douglas-adams-portrait.jpg" alt="Portrait of Douglas Adams" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Adams</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#donald-e-westlake"
             data-kind="Author" data-title="Donald E. Westlake" data-sub="Author profile"
             data-tags="author crime caper">
            <div class="tile-media"><img src="img/donald-e-westlake-portrait.jpg" alt="Portrait of Donald E. Westlake" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Westlake</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#jean-echenoz"
             data-kind="Author" data-title="Jean Echenoz" data-sub="Author profile"
             data-tags="author neo absurd">
            <div class="tile-media"><img src="img/jean-echenoz-portrait.jpg" alt="Portrait of Jean Echenoz" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Echenoz</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#john-kennedy-toole"
             data-kind="Author" data-title="John Kennedy Toole" data-sub="Author profile"
             data-tags="author society grotesque">
            <div class="tile-media"><img src="img/john-kennedy-toole-portrait.jpg" alt="Portrait of John Kennedy Toole" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Toole</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#carl-hiaasen"
             data-kind="Author" data-title="Carl Hiaasen" data-sub="Author profile"
             data-tags="author crime comic noir">
            <div class="tile-media"><img src="img/carl-hiaasen-portrait.jpg" alt="Portrait of Carl Hiaasen" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Hiaasen</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#muriel-spark"
             data-kind="Author" data-title="Muriel Spark" data-sub="Author profile"
             data-tags="author society irony dark">
            <div class="tile-media"><img src="img/muriel-spark-portrait.jpg" alt="Portrait of Muriel Spark" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Spark</div><div class="s">Open profile</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#dave-barry"
             data-kind="Author" data-title="Dave Barry" data-sub="Author profile"
             data-tags="author society american humor">
            <div class="tile-media"><img src="img/dave-barry-portrait.jpg" alt="Portrait of Dave Barry" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Barry</div><div class="s">Open profile</div></div>
          </a>
        </div>

        <div class="row-progress" aria-hidden="true"><span></span></div>
      </div>
    </div>

    <!-- Row 2 -->
    <div class="row" id="row-crime" data-rowname="Crime Comedy" aria-label="Crime Comedy row"
         data-searchitem data-kind="Row" data-title="Crime Comedy" data-sub="Capers, heists, schemes; morality looks ridiculous" data-key="crime comedy caper heist noir">
      <div class="row-head">
        <div class="row-left">
          <h2 class="row-title">Crime Comedy</h2>
          <p class="row-sub">Capers, heists, schemes; morality looks ridiculous.</p>
        </div>
        <div class="row-hint">
          <a href="currents.html#crime">All →</a>
          <span style="opacity:.55;">Swipe</span>
        </div>
      </div>

      <div class="row-shell" data-row>
        <div class="row-track" aria-label="Crime Comedy carousel">

          <a class="tile" data-searchitem href="tourist-season-fiche.html"
             data-kind="Novel" data-title="Tourist Season"
             data-sub="Carl Hiaasen · 1986"
             data-tags="crime comic noir caper">
            <div class="tile-media">
              <img src="img/tourist-season.png" alt="Cover of Tourist Season (Carl Hiaasen) — comic crime fiction" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Comic noir</div>
              <div class="t">Tourist Season</div>
              <div class="s">Carl Hiaasen · 1986</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="florida-roadkill-fiche.html"
             data-kind="Novel" data-title="Florida Roadkill"
             data-sub="Tim Dorsey · 1999"
             data-tags="crime caper farce">
            <div class="tile-media">
              <img src="img/florida-roadkill.png" alt="Cover of Florida Roadkill (Tim Dorsey) — crime caper comedy" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Caper</div>
              <div class="t">Florida Roadkill</div>
              <div class="s">Tim Dorsey · 1999</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="good-behavior-fiche.html"
             data-kind="Novel" data-title="Good Behavior"
             data-sub="Open guide"
             data-tags="crime leonard hitmen comic">
            <div class="tile-media">
              <img src="img/good-behavior.png" alt="Cover of Good Behavior — comic crime" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Hitmen</div>
              <div class="t">Good Behavior</div>
              <div class="s">Open guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="rum-punch-fiche.html"
             data-kind="Novel" data-title="Rum Punch"
             data-sub="Open guide"
             data-tags="crime caper heist florida">
            <div class="tile-media">
              <img src="img/rum-punch.png" alt="Cover of Rum Punch — crime caper" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Caper</div>
              <div class="t">Rum Punch</div>
              <div class="s">Open guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="double-negative-fiche.html"
             data-kind="Novel" data-title="Double Negative"
             data-sub="Campus crime"
             data-tags="crime campus noir academic">
            <div class="tile-media">
              <img src="img/double-negative.png" alt="Cover of Double Negative — campus crime" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Campus</div>
              <div class="t">Double Negative</div>
              <div class="s">Campus crime</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="pulp-fiche.html"
             data-kind="Novel" data-title="Pulp"
             data-sub="Open guide"
             data-tags="crime meta noir writer">
            <div class="tile-media">
              <img src="img/pulp.png" alt="Cover of Pulp — comic noir" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Meta-noir</div>
              <div class="t">Pulp</div>
              <div class="s">Open guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="san-antonio-series.html"
             data-kind="Series" data-title="San-Antonio"
             data-sub="Series guide"
             data-tags="crime series french pulp">
            <div class="tile-media">
              <img src="img/san-antonio.png" alt="Cover of San-Antonio — series" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Series</div>
              <div class="t">San-Antonio</div>
              <div class="s">Series guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-deep-blue-good-by-fiche.html"
             data-kind="Novel" data-title="The Deep Blue Good-by"
             data-sub="Open guide"
             data-tags="crime hardboiled florida">
            <div class="tile-media">
              <img src="img/the-deep-blue-good-by.png" alt="Cover of The Deep Blue Good-by — hardboiled with comic edges" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Hardboiled</div>
              <div class="t">The Deep Blue Good-by</div>
              <div class="s">Open guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="crepe-suzette-fiche.html"
             data-kind="Novel" data-title="Crêpe Suzette"
             data-sub="Open guide"
             data-tags="crime farce european">
            <div class="tile-media">
              <img src="img/crepe-suzette.png" alt="Cover of Crêpe Suzette — comic crime" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Farce</div>
              <div class="t">Crêpe Suzette</div>
              <div class="s">Open guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-player-fiche.html"
             data-kind="Novel" data-title="The Player"
             data-sub="Open guide"
             data-tags="crime satire hollywood">
            <div class="tile-media">
              <img src="img/the-player.png" alt="Cover of The Player — satirical crime-adjacent comedy" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Satire</div>
              <div class="t">The Player</div>
              <div class="s">Open guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="divorcing-jack-fiche.html"
             data-kind="Novel" data-title="Divorcing Jack"
             data-sub="Open guide"
             data-tags="crime dark comedy ireland">
            <div class="tile-media">
              <img src="img/divorcing-jack.png" alt="Cover of Divorcing Jack — dark crime comedy" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Dark comedy</div>
              <div class="t">Divorcing Jack</div>
              <div class="s">Open guide</div>
            </div>
          </a>

          <a class="tile" data-searchitem href="the-burglar-who-painted-like-mondrian-fiche.html"
             data-kind="Novel" data-title="The Burglar Who Painted Like Mondrian"
             data-sub="Open guide"
             data-tags="crime heist burglar art">
            <div class="tile-media">
              <img src="img/the-burglar-who-painted-like-mondrian.png" alt="Cover of The Burglar Who Painted Like Mondrian — comic heist" loading="lazy" decoding="async">
            </div>
            <div class="tile-meta">
              <div class="k">Crime · Heist</div>
              <div class="t">Burglar · Mondrian</div>
              <div class="s">Open guide</div>
            </div>
          </a>

        </div>

        <div class="row-progress" aria-hidden="true"><span></span></div>
      </div>
    </div>

    <!-- Row 3 -->
    <div class="row" id="row-neo" data-rowname="Neo-Nonsense" aria-label="Neo-Nonsense row"
         data-searchitem data-kind="Row" data-title="Neo-Nonsense" data-sub="Absurdist & postmodern comedy — rigorous logic inside a cracked world" data-key="neo nonsense absurd postmodern">
      <div class="row-head">
        <div class="row-left">
          <h2 class="row-title">Neo-Nonsense</h2>
          <p class="row-sub">Absurdist &amp; postmodern comedy — rigorous logic inside a cracked world.</p>
        </div>
        <div class="row-hint">
          <a href="currents.html#neo">All →</a>
          <span style="opacity:.55;">Swipe</span>
        </div>
      </div>

      <div class="row-shell" data-row>
        <div class="row-track" aria-label="Neo-Nonsense carousel">
          <a class="tile" data-searchitem href="the-malaise-expedition-fiche.html" data-kind="Novel" data-title="The Malaise Expedition" data-sub="Jean Echenoz · 1986" data-tags="neo absurd">
            <div class="tile-media"><img src="img/the-malaise-expedition.png" alt="Cover of The Malaise Expedition (Jean Echenoz) — absurdist comedy" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Neo · Absurd</div><div class="t">Malaise</div><div class="s">Jean Echenoz · 1986</div></div>
          </a>

          <a class="tile" data-searchitem href="white-noise-fiche.html" data-kind="Novel" data-title="White Noise" data-sub="Don DeLillo · 1985" data-tags="neo satire postmodern">
            <div class="tile-media"><img src="img/white-noise.png" alt="Cover of White Noise (Don DeLillo) — postmodern satire" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Neo · Satire</div><div class="t">White Noise</div><div class="s">Don DeLillo · 1985</div></div>
          </a>

          <a class="tile is-portrait" data-searchitem href="author-profiles.html#kurt-vonnegut" data-kind="Author" data-title="Kurt Vonnegut" data-sub="Author profile" data-tags="author neo absurd">
            <div class="tile-media"><img src="img/kurt-vonnegut-portrait.jpg" alt="Portrait of Kurt Vonnegut" loading="lazy" decoding="async"></div>
            <div class="tile-meta"><div class="k">Author</div><div class="t">Vonnegut</div><div class="s">Open profile</div></div>
          </a>
        </div>
        <div class="row-progress" aria-hidden="true"><span></span></div>
      </div>
    </div>

  </section>

  <div class="stitch-divider" aria-hidden="true">
    <div class="stitch-badge">Atlas → Paper</div>
  </div>

  <!-- PAPER -->
  <main class="main" id="paper" aria-label="Paper layer (full)">
    <div class="main-inner">
      <div>
        <details class="mobile-toc" id="mobileToc">
          <summary>
            <span>In this page</span>
            <span style="opacity:.72; font-size:12px" id="mobileMeta">~4 min</span>
          </summary>
          <nav class="toc" aria-label="In this page (mobile)" id="tocMobile">
            <a href="#fiches">Guides</a>
            <a href="#currents">Currents</a>
            <a href="#toolbox">Toolbox</a>
            <a href="#about">About</a>
            <a href="#research">Researchers &amp; AI</a>
            <a href="#start">Where to start?</a>
          </nav>
        </details>

        <section class="section" id="fiches" data-spy data-searchitem data-kind="Section" data-title="Guides" data-sub="Novel, author and series guides" data-key="guides novels authors series ten part matrix">
          <div class="kicker">Guides</div>
          <h2 class="h2">Novel, author and series guides</h2>
          <p class="lead">Start from the works. Read the device — with the same matrix, every time.</p>
          <p class="sub">This homepage is a digest. Full definitions &amp; taxonomy live on dedicated pages.</p>

          <div class="grid-3" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Page" data-title="Novel guides" data-sub="Fixed ten-chapter matrix" data-key="novel guides matrix ten chapters">
              <div class="card-head"><span>Novel guides</span><a class="linkpill" href="novel-guides.html">Open →</a></div>
              <div class="card-body">
                <p>Fixed ten-chapter matrix, identical from one book to the next.</p>
                <ul class="list">
                  <li>Reading note (signed)</li>
                  <li>Incipit (original language)</li>
                  <li>Characters (archetypes + citations)</li>
                  <li>Cartography coordinates</li>
                </ul>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Page" data-title="Author profiles" data-sub="How writers build humor" data-key="author profiles voice rhythm devices">
              <div class="card-head"><span>Author profiles</span><a class="linkpill" href="author-profiles.html">Open →</a></div>
              <div class="card-body">
                <p>How writers build humor: motifs, voice, institutions, rhythm.</p>
              </div>
            </article>

            <article class="card" data-searchitem data-kind="Page" data-title="Series guides" data-sub="Cycles where comedy evolves across volumes" data-key="series guides cycles volumes">
              <div class="card-head"><span>Series guides</span><a class="linkpill" href="series.html">Open →</a></div>
              <div class="card-body">
                <p>For cycles where comedy evolves across volumes.</p>
                <ul class="list">
                  <li>tone shifts across time</li>
                  <li>device maturation</li>
                  <li>context changes per volume</li>
                </ul>
              </div>
            </article>
          </div>
        </section>

        <section class="section" id="currents" data-spy data-searchitem data-kind="Section" data-title="Currents" data-sub="Three currents of modern humorous fiction" data-key="currents society crime neo nonsense">
          <div class="kicker">Currents</div>
          <h2 class="h2">Three currents of modern humorous fiction</h2>
          <p class="lead">
            <strong>Comedy of Society</strong>, <strong>comic crime</strong>, and <strong>absurdist / postmodern comedy</strong>.
          </p>
          <p class="sub">Full definitions, branches and examples live on the Currents page.</p>

          <div class="grid-3" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Page" data-title="Comedy of Society" data-sub="Satire & manners" data-key="society satire manners">
              <div class="card-head"><span>Comedy of Society</span><a class="linkpill" href="currents.html#society">Map →</a></div>
              <div class="card-body"><p><strong>Satire</strong> &amp; <strong>manners</strong>: family, work, hierarchy, class.</p></div>
            </article>
            <article class="card" data-searchitem data-kind="Page" data-title="Crime Comedy" data-sub="Comic crime fiction" data-key="crime comedy caper noir">
              <div class="card-head"><span>Crime Comedy</span><a class="linkpill" href="currents.html#crime">Map →</a></div>
              <div class="card-body"><p><strong>Comic crime fiction</strong>: capers, schemes, elastic morality.</p></div>
            </article>
            <article class="card" data-searchitem data-kind="Page" data-title="Neo-Nonsense" data-sub="Absurd & postmodern" data-key="neo nonsense absurd postmodern">
              <div class="card-head"><span>Neo-Nonsense</span><a class="linkpill" href="currents.html#neo">Map →</a></div>
              <div class="card-body"><p><strong>Absurd</strong> &amp; <strong>postmodern</strong>: rigorous logic in a cracked world.</p></div>
            </article>
          </div>
        </section>

        <section class="section" id="toolbox" data-spy data-searchitem data-kind="Section" data-title="Toolbox" data-sub="Vocabulary reused everywhere for comparability" data-key="toolbox comic engine environment labs">
          <div class="kicker">Toolbox</div>
          <h2 class="h2">Toolbox to read the guides</h2>
          <p class="lead">Comedy level · Environment · optional Labs — reused everywhere for comparability.</p>

          <div class="grid-3" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Page" data-title="Comedy level" data-sub="Comic Engine / Thread / Turn" data-key="comic engine comic thread comic turn">
              <div class="card-head"><span>Comedy level</span><a class="linkpill" href="toolbox.html#level">Open →</a></div>
              <div class="card-body"><p>Comic Engine · Comic Thread · Comic Turn.</p></div>
            </article>
            <article class="card" data-searchitem data-kind="Page" data-title="Environment" data-sub="Where it plays: place, milieu, institutions" data-key="environment place milieu institutions">
              <div class="card-head"><span>Environment</span><a class="linkpill" href="toolbox.html#environment">Open →</a></div>
              <div class="card-body"><p>Place, milieu, period, institutions — where it plays.</p></div>
            </article>
            <article class="card" data-searchitem data-kind="Page" data-title="Labs" data-sub="Optional hubs connecting works by shared energy" data-key="labs hubs clusters shared energy">
              <div class="card-head"><span>Labs</span><a class="linkpill" href="toolbox.html#labs">Open →</a></div>
              <div class="card-body"><p>Optional hubs connecting works by shared energy.</p></div>
            </article>
          </div>
        </section>

        <section class="section" id="about" data-spy data-searchitem data-kind="Section" data-title="About" data-sub="A living library, built to be cited" data-key="about method cite stable links">
          <div class="kicker">About</div>
          <h2 class="h2">A living library, built to be cited</h2>
          <p class="lead">Add guides progressively. Keep the matrix stable. Make connections readable.</p>

          <div class="grid-2" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Page" data-title="Method" data-sub="Why the matrix is fixed" data-key="method fixed matrix sources">
              <div class="card-head"><span>Method</span><a class="linkpill" href="method.html">Read →</a></div>
              <div class="card-body"><p>Why the matrix is fixed, how sources are handled, and how the atlas is curated.</p></div>
            </article>
            <article class="card" data-searchitem data-kind="Page" data-title="How to cite" data-sub="Designed for libraries and stable linking" data-key="how to cite stable anchors">
              <div class="card-head"><span>How to cite</span><a class="linkpill" href="fr/a-propos/comment-citer-tnoc">Open →</a></div>
              <div class="card-body"><p>Designed for libraries, researchers, and stable linking.</p></div>
            </article>
          </div>
        </section>

        <section class="section" id="research" data-spy data-searchitem data-kind="Section" data-title="Researchers & AI" data-sub="For research, libraries and assistants" data-key="research libraries assistants stable ids">
          <div class="kicker">Researchers &amp; AI</div>
          <h2 class="h2">For research, libraries and assistants</h2>
          <p class="lead">Structured for comparison: stable IDs, fixed matrices, explicit vocabulary.</p>

          <div class="grid-2" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Page" data-title="Research uses" data-sub="Comparable matrices, explicit typology, stable identifiers" data-key="research uses comparable matrices">
              <div class="card-head"><span>Research uses</span><a class="linkpill" href="fr/a-propos">Open →</a></div>
              <div class="card-body">
                <ul class="list">
                  <li>comparable matrices</li>
                  <li>explicit typology</li>
                  <li>stable identifiers</li>
                </ul>
              </div>
            </article>
            <article class="card" data-searchitem data-kind="Page" data-title="Data & licence" data-sub="Lightweight reuse for corpus projects" data-key="data licence reuse">
              <div class="card-head"><span>Data &amp; licence</span><a class="linkpill" href="fr/a-propos/donnees-licence">Open →</a></div>
              <div class="card-body"><p>Lightweight reuse for corpus projects.</p></div>
            </article>
          </div>
        </section>

        <section class="section" id="start" data-spy data-searchitem data-kind="Section" data-title="Where to start?" data-sub="Enter by a book, by a current, or by a Lab" data-key="start orientation book current lab">
          <div class="kicker">Orientation</div>
          <h2 class="h2">Where to start?</h2>
          <p class="lead">Enter by a book, by a current, or by a Lab — then follow connections.</p>

          <div class="grid-2" style="margin-top:14px;">
            <article class="card" data-searchitem data-kind="Page" data-title="Browse novel guides" data-sub="Pick one book, read the device, follow next" data-key="browse novel guides suggested next">
              <div class="card-head"><span>Start with a guide</span><a class="linkpill" href="novel-guides.html">Browse →</a></div>
              <div class="card-body"><p>Pick one book. Read the device. Follow “Suggested next”.</p></div>
            </article>
            <article class="card" data-searchitem data-kind="Page" data-title="Open Currents" data-sub="Fast orientation" data-key="open currents orientation">
              <div class="card-head"><span>Start with currents</span><a class="linkpill" href="currents.html">Open →</a></div>
              <div class="card-body"><p>Fast orientation.</p></div>
            </article>
          </div>
        </section>
      </div>

      <aside class="rail" aria-label="In this page (paper)">
        <div class="rail-sticky">
          <header>
            <h3>In this page</h3>
            <p class="rail-meta">
              <span class="rail-pill"><span class="tiny" aria-hidden="true"></span><span id="railHere">You are here: Guides</span></span>
              <span class="rail-pill">~<span id="railTime">4</span> min</span>
            </p>
            <div class="rail-progress"><span></span></div>
          </header>
          <nav class="toc" id="tocDesktop">
            <a href="#fiches">Guides</a>
            <a href="#currents">Currents</a>
            <a href="#toolbox">Toolbox</a>
            <a href="#about">About</a>
            <a href="#research">Researchers &amp; AI</a>
            <a href="#start">Where to start?</a>
          </nav>
        </div>
      </aside>
    </div>
  </main>

  <footer class="site-footer" role="contentinfo" aria-label="Site footer">
    <div class="inner">
      <div class="left">
        <strong>The Novel of Comedy (TNoC)</strong> · Atlas &amp; critical cartography of humorous fiction.<br>
        <span class="muted">© <span id="year"></span> Boris Jeanson Béteille</span>
      </div>

      <nav class="links" aria-label="Footer links">
        <a href="method.html">Method</a>
        <a href="fr/a-propos">About</a>
        <a href="fr/a-propos/manifesto">Manifesto</a>
        <a href="fr/a-propos/comment-citer-tnoc">How to cite</a>
        <a href="fr/a-propos/donnees-licence">Data &amp; licence</a>
        <a href="fr/contact">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- Bottom nav mobile -->
  <nav class="bottomnav" aria-label="Bottom navigation">
    <div class="bottomnav-inner">
      <a class="bn-item active" href="#top" id="bnHome"><div class="bn-ic">⌂</div><div class="bn-tx">Home</div></a>
      <a class="bn-item" href="#rows" id="bnBrowse"><div class="bn-ic">⟡</div><div class="bn-tx">Browse</div></a>
      <a class="bn-item" href="currents.html" id="bnMap"><div class="bn-ic">∿</div><div class="bn-tx">Map</div></a>
      <button class="bn-item" type="button" id="bnSearch"><div class="bn-ic">⌕</div><div class="bn-tx">Search</div></button>
    </div>
  </nav>

  <noscript>
    <div style="max-width:1120px;margin:14px auto;padding:12px 16px;border-radius:14px;background:#fff;color:#000;border:1px solid rgba(0,0,0,.12);">
      JavaScript is disabled — carousels and search overlay won’t work. You can still browse the page and open links.
    </div>
  </noscript>

  <script>
    /* =========================================================
       0) Footer year
       ========================================================= */
    (function(){
      const y = document.getElementById('year');
      if(y) y.textContent = String(new Date().getFullYear());
    })();

    /* =========================================================
       0b) If ?q= is present, open search overlay (SEO SearchAction)
       ========================================================= */
    (function(){
      const params = new URLSearchParams(location.search);
      const q = params.get('q');
      if(!q) return;
      window.__tnoc_initial_query = q;
    })();

    /* =========================================================
   1) Build marquee wall from tiles (covers + portraits)
   ✅ robust: works with images in root OR in /img
   ========================================================= */
(function(){
  const tileImgs = Array.from(document.querySelectorAll('.tile img'))
    .map(img => ({ src: (img.getAttribute('src') || "").trim() }))
    .filter(x => x.src);

  if(!tileImgs.length) return;

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]] = [a[j],a[i]];
    }
    return a;
  }

  const mixed = shuffle(tileImgs);

  function fillMarquee(containerId, count){
    const el = document.getElementById(containerId);
    if(!el) return;

    const items = [];
    for(let i=0;i<count;i++){
      const p = mixed[i % mixed.length];
      const src = p.src;
      const altSrc = src.includes("/") ? src : ("img/" + src);

      items.push(`
        <div class="mini-poster">
          <img src="${src}" alt="" aria-hidden="true" loading="lazy" decoding="async"
               onerror="if(!this.dataset.tried){this.dataset.tried=1; this.src='${altSrc}'} else {this.style.display='none'}">
        </div>
      `);
    }
    const once = items.join('');
    el.innerHTML = once + once;
  }

  fillMarquee('mq1', 24);
  fillMarquee('mq2', 22);
  fillMarquee('mq3', 20);
})();

    /* =========================================================
       2) Row progress bars
       ========================================================= */
    (function(){
      const shells = Array.from(document.querySelectorAll('[data-row]'));
      function clamp(n,a,b){ return Math.max(a, Math.min(b, n)); }
      shells.forEach(shell => {
        const track = shell.querySelector('.row-track');
        const prog  = shell.querySelector('.row-progress > span');
        if(!track || !prog) return;
        function update(){
          const max = Math.max(1, track.scrollWidth - track.clientWidth);
          const pct = clamp((track.scrollLeft / max) * 100, 0, 100);
          prog.style.width = pct + "%";
        }
        track.addEventListener('scroll', update, { passive:true });
        window.addEventListener('resize', update);
        update();
      });
    })();

    /* =========================================================
       3) Search overlay (Ctrl/⌘ K) — unified data-searchitem index
       ✅ changes: focus-trap + restore focus + single Escape handler
       ========================================================= */
    (function(){
      const overlay = document.getElementById('searchOverlay');
      const box = overlay?.querySelector('.searchbox');
      const input = document.getElementById('searchInput');
      const results = document.getElementById('searchResults');
      const empty = document.getElementById('searchEmpty');
      const count = document.getElementById('searchCount');

      const openBtn = document.getElementById('openSearch');
      const openBtn2 = document.getElementById('openSearch2');
      const closeBtn = document.getElementById('searchClose');
      const bnSearch = document.getElementById('bnSearch');

      let lastFocus = null;

      function norm(s){
        return (s || "").toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
      }

      function badgeFrom(kind){
        const k = (kind || "Item").trim();
        return (k.slice(0,2) || "IT").toUpperCase();
      }

      const items = Array.from(document.querySelectorAll('[data-searchitem]')).map(el => {
        const kind = el.getAttribute('data-kind') || "Item";
        const title =
          (el.getAttribute('data-title') || "").trim() ||
          (el.querySelector('h1,h2,h3,.row-title,.card-head span,.tile-meta .t')?.textContent || "").trim() ||
          "Untitled";
        const sub =
          (el.getAttribute('data-sub') || "").trim() ||
          (el.querySelector('.row-sub,.tile-meta .s')?.textContent || "").trim();
        const key = (el.getAttribute('data-key') || "").trim();
        const tags = (el.getAttribute('data-tags') || "").trim();
        const href = (el.getAttribute('href') || (el.id ? ("#" + el.id) : "#top")).trim();
        const img = el.querySelector('img')?.getAttribute('src') || "";
        const badge = badgeFrom(kind);
        return { href, title, sub, kind, key, tags, img, badge };
      }).filter(it => it.href && it.title);

      function render(q){
        const nq = norm(q).trim();
        const filtered = !nq ? items.slice(0, 20) : items.filter(it => {
          const hay = norm(it.title + " " + it.sub + " " + it.kind + " " + it.key + " " + it.tags);
          return hay.includes(nq);
        }).slice(0, 60);

        results.innerHTML = filtered.map(it => `
          <a class="result" href="${it.href}">
            <div class="rthumb" aria-hidden="true">
              ${it.img ? `<img src="${it.img}" alt="" loading="lazy" decoding="async">` : `${it.badge}`}
            </div>
            <div class="rtext">
              <div class="rk">${it.kind || "Result"}</div>
              <p class="rt">${it.title || "Untitled"}</p>
              <div class="rs">${it.sub || ""}</div>
            </div>
          </a>
        `).join('');

        const n = filtered.length;
        if(count) count.textContent = String(n);
        if(empty) empty.style.display = (n === 0) ? 'block' : 'none';
      }

      function open(withQuery){
        lastFocus = document.activeElement;
        overlay.classList.add('open');
        overlay.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
        if(input){
          input.value = withQuery || "";
          setTimeout(()=> input.focus(), 40);
        }
        render(input ? input.value : "");
      }

      function close(){
        overlay.classList.remove('open');
        overlay.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
        if(lastFocus && lastFocus.focus) setTimeout(()=> lastFocus.focus(), 0);
      }

      function hookOpen(btn){
        if(!btn) return;
        btn.addEventListener('click', () => open(""));
      }
      hookOpen(openBtn);
      hookOpen(openBtn2);
      hookOpen(bnSearch);

      if(closeBtn) closeBtn.addEventListener('click', close);
      overlay.addEventListener('click', (e) => { if(e.target === overlay) close(); });

      if(input) input.addEventListener('input', () => render(input.value));

      results.addEventListener('click', (e) => {
        const a = e.target.closest('a');
        if(a) close();
      });

      // ✅ Focus trap + Esc + Ctrl/⌘K
      window.addEventListener('keydown', (e) => {
        const isOpen = overlay.classList.contains('open');
        const isMac = navigator.platform.toUpperCase().indexOf('MAC')>=0;
        const k = e.key.toLowerCase() === 'k';

        if(k && ((isMac && e.metaKey) || (!isMac && e.ctrlKey))){
          e.preventDefault();
          if(isOpen) close(); else open("");
          return;
        }

        if(!isOpen) return;

        if(e.key === 'Escape'){ close(); return; }

        if(e.key === 'Tab' && box){
          const focusables = Array.from(box.querySelectorAll(
            'a[href], button:not([disabled]), input:not([disabled]), [tabindex]:not([tabindex="-1"])'
          ));
          if(!focusables.length) return;

          const first = focusables[0];
          const last  = focusables[focusables.length - 1];

          if(e.shiftKey && document.activeElement === first){
            e.preventDefault(); last.focus();
          } else if(!e.shiftKey && document.activeElement === last){
            e.preventDefault(); first.focus();
          }
        }
      });

      if(window.__tnoc_initial_query){
        const q = String(window.__tnoc_initial_query || "");
        try { history.replaceState(null, "", location.pathname + location.hash); } catch(e){}
        open(q);
      }
    })();

    /* =========================================================
       5) Paper scrollspy + progress + reading time
       ========================================================= */
    (function(){
      const linksDesktop = Array.from(document.querySelectorAll('#tocDesktop a'));
      const linksMobile  = Array.from(document.querySelectorAll('#tocMobile a'));
      const sections = Array.from(document.querySelectorAll('[data-spy]'));
      const bar = document.querySelector('.rail-progress > span');
      const railHere = document.getElementById('railHere');
      const railTime = document.getElementById('railTime');
      const mobileMeta = document.getElementById('mobileMeta');

      function getHashId(href){
        if (!href) return "";
        const i = href.indexOf('#');
        return (i === -1) ? "" : href.slice(i + 1);
      }

      function estimateReadingTime(){
        const paper = document.querySelector('main.main');
        if(!paper) return 4;
        const text = paper.innerText || "";
        const words = text.trim().split(/\s+/).filter(Boolean).length;
        return Math.max(3, Math.round(words / 200));
      }

      function updateProgress(){
        if(!bar) return;
        const doc = document.documentElement;
        const st = doc.scrollTop || document.body.scrollTop;
        const sh = doc.scrollHeight - doc.clientHeight;
        const pct = sh > 0 ? (st / sh) * 100 : 0;
        bar.style.width = Math.max(0, Math.min(100, pct)) + "%";
      }

      function setActive(){
        if(!sections.length) return;
        const st = window.scrollY || 0;
        const offset = 150;
        let activeId = sections[0].id;
        sections.forEach(s => { if(st + offset >= s.offsetTop) activeId = s.id; });

        function apply(links){
          links.forEach(a => a.classList.toggle('active', getHashId(a.getAttribute('href')) === activeId));
        }
        apply(linksDesktop);
        apply(linksMobile);

        if(railHere){
          const map = {
            "fiches":"Guides",
            "currents":"Currents",
            "toolbox":"Toolbox",
            "about":"About",
            "research":"Researchers & AI",
            "start":"Where to start?"
          };
          railHere.textContent = "You are here: " + (map[activeId] || "Guides");
        }
      }

      const minutes = estimateReadingTime();
      if(railTime) railTime.textContent = String(minutes);
      if(mobileMeta) mobileMeta.textContent = "~" + minutes + " min";

      window.addEventListener('scroll', updateProgress, { passive:true });
      window.addEventListener('scroll', setActive, { passive:true });
      window.addEventListener('resize', setActive);

      updateProgress();
      setActive();
    })();

    /* =========================================================
       6) Bottom nav active state (home/browse/search)
       ========================================================= */
    (function(){
      const bnHome = document.getElementById('bnHome');
      const bnBrowse = document.getElementById('bnBrowse');
      const bnSearch = document.getElementById('bnSearch');

      function setActive(which){
        [bnHome,bnBrowse,bnSearch].forEach(el => el && el.classList.remove('active'));
        if(which && which.classList) which.classList.add('active');
      }

      if(bnHome) bnHome.addEventListener('click', () => setActive(bnHome));
      if(bnBrowse) bnBrowse.addEventListener('click', () => setActive(bnBrowse));
      if(bnSearch) bnSearch.addEventListener('click', () => setActive(bnSearch));
    })();
  </script>

  <!-- Images expected in /img -->
</body>
</html>

